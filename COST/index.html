<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Costco Wholesale (COST) - TickerHack Deep Research</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F4; /* stone-100 */
            color: #374151; /* gray-700 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) { /* md */
            .chart-container {
                height: 350px;
                max-height: 400px;
            }
        }
        .section-card {
            background-color: #FFFFFF;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.04); /* Softer shadow */
            padding: 1.5rem; /* p-6 */
            margin-bottom: 2rem; /* mb-8 */
        }
        .main-title {
            font-size: 2.25rem; /* text-4xl */
            font-weight: 700; /* font-bold */
            color: #1F2937; /* gray-800 */
            margin-bottom: 1rem;
            text-align: center;
        }
        .section-title {
            font-size: 1.875rem; /* text-3xl */
            font-weight: 600; /* font-semibold */
            color: #E31837; /* Costco Red */
            margin-bottom: 1.5rem; /* mb-6 */
            padding-bottom: 0.5rem; /* pb-2 */
            border-bottom: 2px solid #E7E5E4; /* stone-200 */
        }
        .subsection-title {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 600; /* font-semibold */
            color: #005DAA; /* Costco Blue */
            margin-top: 1.5rem; /* mt-6 */
            margin-bottom: 1rem; /* mb-4 */
        }
        .content-text {
            line-height: 1.75;
            color: #4B5563; /* gray-600 */
            font-size: 0.95rem;
        }
        .highlight {
            color: #F97316; /* orange-500 */
            font-weight: 600;
        }
        .tab-button {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            font-weight: 500;
            font-size: 0.875rem; /* text-sm */
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            background-color: #E7E5E4; /* stone-200 */
            color: #374151; /* gray-700 */
            border: 1px solid transparent;
        }
        .tab-button.active {
            background-color: #E31837; /* Costco Red */
            color: #FFFFFF;
            border-color: #C0192D; 
        }
        .nav-link {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            font-weight: 500;
            color: #374151; /* gray-700 */
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            white-space: nowrap;
        }
        .nav-link:hover, .nav-link.active {
            background-color: #E31837; /* Costco Red */
            color: #FFFFFF;
        }
        .kpi-card {
            background-color: #F9FAFB; /* gray-50 */
            border: 1px solid #E7E5E4; /* stone-200 */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 1rem;
            text-align: center;
        }
        .kpi-label {
            font-size: 0.875rem; /* text-sm */
            color: #6B7280; /* gray-600 */
            margin-bottom: 0.25rem;
        }
        .kpi-value {
            font-size: 1.75rem; /* text-2xl or 3xl */
            font-weight: 600;
            color: #1F2937; /* gray-800 */
        }
    </style>
</head>
<body class="min-h-screen">

    <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md shadow-md">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold" style="color: #E31837;">Costco Wholesale (COST) Analysis</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-1 lg:space-x-2">
                        <a href="#overview" class="nav-link">Overview</a>
                        <a href="#segments" class="nav-link">Business Segments</a>
                        <a href="#financials" class="nav-link">Financials</a>
                        <a href="#competition" class="nav-link">Competitive Moat</a>
                        <a href="#outlook" class="nav-link">Outlook</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-red-500" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
            <div class="md:hidden hidden" id="mobile-menu">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <a href="#overview" class="nav-link block text-base">Overview</a>
                    <a href="#segments" class="nav-link block text-base">Business Segments</a>
                    <a href="#financials" class="nav-link block text-base">Financials</a>
                    <a href="#competition" class="nav-link block text-base">Competitive Moat</a>
                    <a href="#outlook" class="nav-link block text-base">Outlook</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-6 lg:p-8 mt-4">

        <section id="overview" class="section-card scroll-mt-20">
            <h2 class="section-title">Costco: The Membership Warehouse Juggernaut</h2>
            <p class="content-text mb-6">Costco Wholesale Corporation operates a global chain of membership-only warehouse clubs, renowned for offering a limited selection of high-quality, brand-name and private-label merchandise at incredibly low prices. The company's business model is a masterclass in operational efficiency and customer loyalty. Unlike traditional retailers that make money on product markups, Costco sells goods at razor-thin margins, often near cost. The company's profit is primarily driven by the <span class="highlight">annual membership fees</span> paid by its massive and fiercely loyal member base. This unique model creates a powerful flywheel: low prices drive membership growth, which increases Costco's buying power, allowing it to demand even lower prices from suppliers and pass the savings back to members. This analysis explores Costco's simple yet powerful business model, its financial consistency, and its formidable competitive advantages.</p>
            
            <div class="grid md:grid-cols-2 gap-6 items-start">
                <div>
                    <h3 class="subsection-title !mt-0">Core Business Strategy</h3>
                    <p class="content-text mb-4">Costco's strategy is elegantly simple and relentlessly executed:</p>
                    <ul class="list-disc list-inside content-text space-y-1 pl-4">
                        <li><strong class="font-semibold text-gray-700">Adhere to the "Five Rights":</strong> A guiding principle to provide the right quality goods, at the right low price, at the right time, in the right place, and in the right condition.</li>
                        <li><strong class="font-semibold text-gray-700">Drive Membership Value:</strong> The entire business is oriented around making the membership so valuable that it's an automatic renewal for customers. This is achieved through extreme price leadership and high-quality products.</li>
                        <li><strong class="font-semibold text-gray-700">Operational Excellence & Simplicity:</strong> Maintain a no-frills warehouse environment, a highly limited number of SKUs (product types), and exceptional inventory turnover to keep costs at an absolute minimum.</li>
                        <li><strong class="font-semibold text-gray-700">The "Treasure Hunt":</strong> Cultivate an exciting shopping experience by constantly rotating a selection of high-end or unique items, encouraging members to visit often to see what's new.</li>
                    </ul>
                </div>
                <div class="kpi-card bg-red-50 border-red-200">
                    <p class="kpi-label">Worldwide Membership Renewal Rate</p>
                    <p class="kpi-value text-red-600">~90.5%</p>
                    <p class="content-text text-sm mt-2">This incredibly high renewal rate is the ultimate testament to the value of a Costco membership and the foundation of its business model.</p>
                </div>
            </div>
        </section>

        <section id="segments" class="section-card scroll-mt-20">
            <h2 class="section-title">How Costco Makes Money: Membership Fees & Merchandise</h2>
            <p class="content-text mb-6">Costco's business model has two revenue streams, but only one truly drives profit. **Net Sales** from merchandise make up over 97% of total revenue, but are sold at such low margins that they only cover operating costs. The high-margin **Membership Fees**, while only ~2% of revenue, flow almost directly to the bottom line and account for the vast majority of operating profit. Merchandise is organized into several key categories.</p>

            <div class="mb-6 border-b border-stone-200">
                <nav class="-mb-px flex space-x-4" aria-label="Tabs">
                    <button class="segment-tab-button active" data-target="revenue">The Profit Engine</button>
                    <button class="segment-tab-button" data-target="merchandise">Merchandise Categories</button>
                </nav>
            </div>

            <div id="segmentDetails">
                <div id="revenueContent" class="segment-content">
                    <h3 class="subsection-title">The Membership Fee Profit Engine</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <p class="content-text mb-2">This chart illustrates the core of Costco's model. While Net Sales (the blue bar) are massive, the gross margin on this merchandise is only around 11%. After factoring in operating expenses, this part of the business barely breaks even. The Membership Fees (the red bar), though much smaller, carry nearly 100% margin. In fiscal 2024, membership fees of <span class="highlight">$4.9 billion</span> accounted for approximately 65% of the company's total operating income. This is the secret to Costco's success.</p>
                        </div>
                        <div class="chart-container h-72 md:h-80">
                            <canvas id="revenueBreakdownChart"></canvas>
                        </div>
                    </div>
                </div>
                <div id="merchandiseContent" class="segment-content hidden">
                    <h3 class="subsection-title">Merchandise Categories</h3>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div>
                            <p class="content-text mb-2">Costco's merchandise is designed to drive traffic and reinforce its value proposition. The selection is limited (fewer than 4,000 SKUs vs. over 100,000 at a typical superstore) to maximize turnover and buying power.</p>
                            <ul class="list-disc list-inside content-text space-y-1 pl-4 mt-2">
                                <li><strong>Food & Sundries:</strong> The largest category, including groceries, cleaning supplies, and health & beauty aids.</li>
                                <li><strong>Fresh Foods:</strong> A key traffic driver, including produce, meat, and bakery items.</li>
                                <li><strong>Hardlines:</strong> Includes major appliances, electronics, and automotive supplies.</li>
                                <li><strong>Softlines:</strong> Includes apparel, small appliances, and home furnishings.</li>
                            </ul>
                        </div>
                        <div class="chart-container h-72 md:h-80">
                            <canvas id="segmentBreakdownChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="financials" class="section-card scroll-mt-20">
            <h2 class="section-title">Financial Deep Dive</h2>
            <p class="content-text mb-6">Costco's financial performance is a model of consistency and strength. The company reliably grows its membership base and comparable store sales year after year, leading to a steadily increasing stream of high-margin membership fee income. This translates into predictable growth in net income and cash flow, which the company uses to reinvest in the business and reward shareholders through both regular and special dividends. Key metrics for investors are comparable sales growth and the growth in membership fees.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title">Fiscal Year Trends (2020-2024)</h3>
                    <div class="mb-4">
                        <label for="yearlyMetricSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Annual Metric:</label>
                        <select id="yearlyMetricSelect" class="block w-full p-2 border border-stone-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500">
                            <option value="netRevenue" selected>Total Revenue ($B)</option>
                            <option value="membershipFees">Membership Fees ($B)</option>
                            <option value="netIncome">Net Income ($B)</option>
                        </select>
                    </div>
                    <div id="yearlyFinancialChartContainer" class="chart-container h-80 max-w-full">
                        <canvas id="yearlyFinancialChart"></canvas>
                    </div>
                </div>

                <div>
                    <h3 class="subsection-title">Quarterly Trends (Recent 8 Qtrs)</h3>
                     <div class="mb-4">
                        <label for="quarterlyMetricSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Quarterly Metric:</label>
                        <select id="quarterlyMetricSelect" class="block w-full p-2 border border-stone-300 rounded-md shadow-sm focus:ring-red-500 focus:border-red-500">
                            <option value="netRevenue" selected>Total Revenue ($B)</option>
                            <option value="netIncome">Net Income ($B)</option>
                        </select>
                    </div>
                    <div id="quarterlyFinancialChartContainer" class="chart-container h-80 max-w-full">
                        <canvas id="quarterlyFinancialChart"></canvas>
                    </div>
                </div>
            </div>
             <p class="content-text text-sm mt-6 text-center">The financial charts showcase Costco's remarkably consistent growth. The steady, upward march of membership fee income is the bedrock of the company's financial strength and predictability.</p>
        </section>

        <section id="competition" class="section-card scroll-mt-20">
            <h2 class="section-title">Competitive Moat: A Fortress of Value</h2>
            <p class="content-text mb-6">Costco's competitive moat is exceptionally wide and durable, built on a powerful, self-reinforcing business model that competitors find nearly impossible to replicate. Its advantages stem from a virtuous cycle of scale, cost leadership, and customer loyalty.</p>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title !mt-0">Key Moats</h3>
                    <ul class="list-none space-y-3">
                        <li class="flex items-start">
                            <span class="text-red-600 mr-2 mt-1">➔</span>
                            <span class="content-text"><strong class="text-gray-700">Scale-Driven Cost Advantage:</strong> As one of the world's largest retailers, Costco possesses immense bargaining power with suppliers. Its limited SKU count further concentrates this buying power, allowing it to demand the lowest possible prices. This cost advantage is the foundation of its price leadership.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-red-600 mr-2 mt-1">➔</span>
                            <span class="content-text"><strong class="text-gray-700">Sticky Membership Model:</strong> The annual membership fee creates a powerful psychological moat. Having paid the fee, members are highly incentivized to consolidate their shopping at Costco to maximize their return on that "investment." This leads to incredible customer loyalty and predictable, high-margin revenue.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-red-600 mr-2 mt-1">➔</span>
                            <span class="content-text"><strong class="text-gray-700">Powerful Brand & Trust:</strong> The Costco and Kirkland Signature brands are synonymous with value and quality. Customers implicitly trust that Costco is offering them the best possible deal, which significantly reduces their incentive to comparison shop elsewhere.</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="subsection-title !mt-0">Primary Competitors</h3>
                     <ul class="list-none space-y-3">
                        <li class="flex items-start">
                            <span class="text-blue-600 mr-2 mt-1">●</span>
                            <span class="content-text"><strong class="text-gray-700">Walmart (Sam's Club):</strong> The most direct competitor. Sam's Club operates a nearly identical warehouse club model and is owned by Walmart, the world's largest retailer.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-blue-600 mr-2 mt-1">●</span>
                            <span class="content-text"><strong class="text-gray-700">Amazon:</strong> A major competitor, particularly through its "Subscribe & Save" bulk delivery service, which competes on convenience and price for consumer staples.</span>
                        </li>
                         <li class="flex items-start">
                            <span class="text-blue-600 mr-2 mt-1">●</span>
                             <span class="content-text"><strong class="text-gray-700">Other Mass Retailers:</strong> Competes broadly with other large retailers like Target and grocery chains like Kroger for a share of the consumer's wallet.</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="outlook" class="section-card scroll-mt-20">
            <h2 class="section-title">Strategic Outlook: Risks & Rewards</h2>
            <p class="content-text mb-6">The investment thesis for Costco is a bet on the durability of its powerful business model and its ability to continue executing with excellence. The rewards come from its consistent, steady growth and the loyalty of its member base, while the risks are centered on the intense competition in the retail sector and the challenge of maintaining its unique value proposition.</p>
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title !mt-0 text-teal-600">Rewards & Opportunities 🚀</h3>
                    <ul class="list-disc list-inside content-text space-y-2 pl-4">
                        <li><strong>Consistent, Predictable Growth:</strong> The membership model provides a clear path to steady, low-double-digit earnings growth through new warehouse openings and consistent comparable sales growth.</li>
                        <li><strong>International Expansion:</strong> Significant runway for growth by continuing to expand its warehouse footprint in less penetrated international markets.</li>
                        <li><strong>Pricing Power & Inflation Hedge:</strong> As the recognized price leader, Costco is a destination for consumers during inflationary periods. Its model is built to thrive by offering value.</li>
                        <li><strong>Immense Customer Loyalty:</strong> The powerful value proposition results in industry-leading customer loyalty and renewal rates, creating a highly durable and defensive business.</li>
                    </ul>
                </div>
                <div>
                    <h3 class="subsection-title !mt-0 text-orange-600">Risks & Challenges 📉</h3>
                    <ul class="list-disc list-inside content-text space-y-2 pl-4">
                        <li><strong>Intense Retail Competition:</strong> The retail landscape is fiercely competitive. Costco must constantly fight to maintain its price leadership against giants like Walmart, Amazon, and others.</li>
                        <li><strong>Maintaining the Culture & Value Proposition:</strong> The entire model depends on a relentless focus on cost control and value. Any deviation from this core ethos could erode its competitive advantage.</li>
                        <li><strong>Membership Growth Saturation:</strong> In its most mature markets (U.S., Canada), the company faces the risk that membership growth could slow as it reaches a natural saturation point.</li>
                        <li><strong>Premium Valuation:</strong> As a best-in-class retailer, Costco's stock often trades at a significant premium to its peers, which could limit future returns if growth were to slow unexpectedly.</li>
                    </ul>
                </div>
            </div>
        </section>

        <footer class="bg-stone-800 text-stone-300 py-8 text-center mt-12">
            <p class="text-sm">&copy; <span id="currentYearFooter"></span> TickerHack Deep Research. For informational purposes only.</p>
            <p class="text-xs mt-1">Data synthesized from Costco Wholesale Corporation public filings and credible financial news sources as of June 2025.</p>
        </footer>

    <script>
        document.getElementById('currentYearFooter').textContent = new Date().getFullYear();

        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-button');
        const mobileMenuEl = document.getElementById('mobile-menu');
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenuEl.classList.toggle('hidden');
            mobileMenuBtn.querySelectorAll('svg').forEach(svg => svg.classList.toggle('hidden'));
        });
        
        // Smooth scroll and active nav link highlighting
        const navLinks = document.querySelectorAll('header nav a[href^="#"]');
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                if (!mobileMenuEl.classList.contains('hidden')) {
                    mobileMenuBtn.click(); // Close mobile menu if open
                }
                navLinks.forEach(l => l.classList.remove('active'));
                e.currentTarget.classList.add('active');
            });
        });
        
        // Segment Tabs
        const segmentTabs = document.querySelectorAll('.segment-tab-button');
        const segmentContents = document.querySelectorAll('.segment-content');
        segmentTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                segmentTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                const targetId = tab.dataset.target + 'Content';
                segmentContents.forEach(content => {
                    content.id === targetId ? content.classList.remove('hidden') : content.classList.add('hidden');
                });
            });
        });

        // Chart.js Global Config
        Chart.defaults.font.family = 'Inter, sans-serif';
        Chart.defaults.color = '#4B5563';

        const CHART_COLORS = {
            red: '#E31837',
            blue: '#005DAA',
            gray: '#6B7280',
            sky: '#38BDF8',
            amber: '#F59E0B'
        };

        // Revenue Breakdown Chart
        const revenueBreakdownCtx = document.getElementById('revenueBreakdownChart').getContext('2d');
        new Chart(revenueBreakdownCtx, {
            type: 'bar',
            data: {
                labels: ['FY2024'],
                datasets: [
                    {
                        label: 'Net Sales ($B)',
                        data: [252.7],
                        backgroundColor: CHART_COLORS.blue + 'BF',
                        borderColor: CHART_COLORS.blue
                    },
                    {
                        label: 'Membership Fees ($B)',
                        data: [4.9],
                        backgroundColor: CHART_COLORS.red + 'BF',
                        borderColor: CHART_COLORS.red
                    }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { position: 'bottom' }, title: { display: true, text: 'Revenue Sources (Fees are nearly pure profit)' } },
                scales: { y: { beginAtZero: true, title: {display: true, text: 'Billions USD'}}}
            }
        });
        
        // Segment (Category) Breakdown Chart
        const segmentBreakdownCtx = document.getElementById('segmentBreakdownChart').getContext('2d');
        new Chart(segmentBreakdownCtx, {
            type: 'doughnut',
            data: {
                labels: ['Food & Sundries', 'Fresh Foods', 'Hardlines', 'Softlines'],
                datasets: [{
                    label: 'FY2024 Merchandise Mix',
                    data: [41, 18, 17, 10], // Remaining is ancillary
                    backgroundColor: [CHART_COLORS.blue, CHART_COLORS.sky, CHART_COLORS.gray, CHART_COLORS.amber],
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { position: 'bottom' }, title: { display: true, text: 'FY2024 Merchandise Mix by Category (%)' } }
            }
        });

        // --- FINANCIAL CHARTS LOGIC ---

        // Yearly Data Store
        const yearlyDataStore = {
            labels: ['FY20', 'FY21', 'FY22', 'FY23', 'FY24'],
            netRevenue: { data: [166.8, 195.9, 227.0, 242.3, 257.6], label: 'Total Revenue ($B)', color: CHART_COLORS.blue },
            membershipFees: { data: [3.5, 3.9, 4.2, 4.6, 4.9], label: 'Membership Fees ($B)', color: CHART_COLORS.red },
            netIncome: { data: [4.0, 5.0, 5.8, 6.3, 7.1], label: 'Net Income ($B)', color: CHART_COLORS.gray },
        };

        // Quarterly Data Store
        const quarterlyDataStore = {
            labels: ['Q3 23', 'Q4 23', 'Q1 24', 'Q2 24', 'Q3 24', 'Q4 24', 'Q1 25', 'Q2 25'],
            netRevenue: { data: [58.5, 78.9, 64.5, 61.4, 60.1, 81.2, 66.8, 63.3], label: 'Total Revenue ($B)', color: CHART_COLORS.blue },
            netIncome: { data: [1.3, 1.87, 1.59, 1.48, 1.35, 1.95, 1.68, 1.55], label: 'Net Income ($B)', color: CHART_COLORS.gray }
        };

        let yearlyChart = null;
        let quarterlyChart = null;
        const yearlySelect = document.getElementById('yearlyMetricSelect');
        const quarterlySelect = document.getElementById('quarterlyMetricSelect');
        const yearlyCanvas = document.getElementById('yearlyFinancialChart').getContext('2d');
        const quarterlyCanvas = document.getElementById('quarterlyFinancialChart').getContext('2d');

        function createChart(canvas, existingChart, dataStore, metricKey) {
            if (existingChart) {
                existingChart.destroy();
            }
            const metricDetails = dataStore[metricKey];
            return new Chart(canvas, {
                type: 'bar',
                data: {
                    labels: dataStore.labels,
                    datasets: [{
                        label: metricDetails.label,
                        data: metricDetails.data,
                        backgroundColor: metricDetails.color + 'BF',
                        borderColor: metricDetails.color,
                        borderWidth: 1,
                        type: (metricKey === 'membershipFees') ? 'line' : 'bar',
                        fill: (metricKey === 'membershipFees') ? false : true,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: false, title: { display: true, text: metricDetails.label.split('(')[1].replace(')','')} } },
                    plugins: { legend: { display: false } }
                }
            });
        }
        
        yearlySelect.addEventListener('change', (event) => {
            yearlyChart = createChart(yearlyCanvas, yearlyChart, yearlyDataStore, event.target.value);
        });

        quarterlySelect.addEventListener('change', (event) => {
            quarterlyChart = createChart(quarterlyCanvas, quarterlyChart, quarterlyDataStore, event.target.value);
        });

        // Initial chart renders
        yearlyChart = createChart(yearlyCanvas, yearlyChart, yearlyDataStore, 'netRevenue');
        quarterlyChart = createChart(quarterlyCanvas, quarterlyChart, quarterlyDataStore, 'netRevenue');

    </script>
</body>
</html>

