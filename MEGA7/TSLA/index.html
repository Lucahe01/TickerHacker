<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tesla, Inc. (TSLA) - TickerHack Deep Research</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F4; /* stone-100 */
            color: #374151; /* gray-700 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) { /* md */
            .chart-container {
                height: 350px;
                max-height: 400px;
            }
        }
        .section-card {
            background-color: #FFFFFF;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.04); /* Softer shadow */
            padding: 1.5rem; /* p-6 */
            margin-bottom: 2rem; /* mb-8 */
        }
        .main-title {
            font-size: 2.25rem; /* text-4xl */
            font-weight: 700; /* font-bold */
            color: #1F2937; /* gray-800 */
            margin-bottom: 1rem;
            text-align: center;
        }
        .section-title {
            font-size: 1.875rem; /* text-3xl */
            font-weight: 600; /* font-semibold */
            color: #A78BFA; /* violet-400 */
            margin-bottom: 1.5rem; /* mb-6 */
            padding-bottom: 0.5rem; /* pb-2 */
            border-bottom: 2px solid #E7E5E4; /* stone-200 */
        }
        .subsection-title {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 600; /* font-semibold */
            color: #7DD3FC; /* sky-400 */
            margin-top: 1.5rem; /* mt-6 */
            margin-bottom: 1rem; /* mb-4 */
        }
        .content-text {
            line-height: 1.75;
            color: #4B5563; /* gray-600 */
            font-size: 0.95rem;
        }
        .highlight {
            color: #F97316; /* orange-500 */
            font-weight: 600;
        }
        .tab-button {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            font-weight: 500;
            font-size: 0.875rem; /* text-sm */
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            background-color: #E7E5E4; /* stone-200 */
            color: #374151; /* gray-700 */
            border: 1px solid transparent;
        }
        .tab-button.active {
            background-color: #A78BFA; /* violet-400 */
            color: #FFFFFF;
            border-color: #8B5CF6; /* violet-500 */
        }
        .nav-link {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            font-weight: 500;
            color: #374151; /* gray-700 */
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            white-space: nowrap;
        }
        .nav-link:hover, .nav-link.active {
            background-color: #A78BFA; /* violet-400 */
            color: #FFFFFF;
        }
        .kpi-card {
            background-color: #F9FAFB; /* gray-50 */
            border: 1px solid #E7E5E4; /* stone-200 */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 1rem;
            text-align: center;
        }
        .kpi-label {
            font-size: 0.875rem; /* text-sm */
            color: #6B7280; /* gray-500 */
            margin-bottom: 0.25rem;
        }
        .kpi-value {
            font-size: 1.75rem; /* text-2xl or 3xl */
            font-weight: 600;
            color: #1F2937; /* gray-800 */
        }
    </style>
</head>
<body class="min-h-screen">

    <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md shadow-md">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold" style="color: #A78BFA;">Tesla (TSLA) Analysis</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-1 lg:space-x-2">
                        <a href="#overview" class="nav-link">Overview</a>
                        <a href="#segments" class="nav-link">Business Segments</a>
                        <a href="#financials" class="nav-link">Financials</a>
                        <a href="#competition" class="nav-link">Competitive Moat</a>
                        <a href="#outlook" class="nav-link">Outlook</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-violet-500" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
            <div class="md:hidden hidden" id="mobile-menu">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <a href="#overview" class="nav-link block text-base">Overview</a>
                    <a href="#segments" class="nav-link block text-base">Business Segments</a>
                    <a href="#financials" class="nav-link block text-base">Financials</a>
                    <a href="#competition" class="nav-link block text-base">Competitive Moat</a>
                    <a href="#outlook" class="nav-link block text-base">Outlook</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-6 lg:p-8 mt-4">

        <section id="overview" class="section-card scroll-mt-20">
            <h2 class="section-title">Tesla: More Than a Car Company</h2>
            <p class="content-text mb-6">Tesla (NASDAQ: TSLA) is a vertically integrated sustainable energy company with a mission to accelerate the world's transition to sustainable energy. While best known for its high-performance electric vehicles, Tesla's ambitions extend far beyond the automotive industry. The company is making massive, long-term investments to become a leader in <span class="highlight">Artificial Intelligence, robotics, and real-world autonomy</span>. The investment case for Tesla is no longer just about selling cars; it's a bet on the company's ability to solve some of the hardest problems in technology, from creating a fully autonomous "robotaxi" network to developing a humanoid robot (Optimus) that could revolutionize manufacturing and labor.</p>
            
            <div class="grid md-grid-cols-2 gap-6 items-start">
                <div>
                    <h3 class="subsection-title !mt-0">Core Strategy: Vertical Integration and Full-Stack Innovation</h3>
                    <p class="content-text mb-4">Tesla's strategy is built on a foundation of first-principles engineering and a relentless drive to innovate:</p>
                    <ul class="list-disc list-inside content-text space-y-1 pl-4">
                        <li><strong class="font-semibold text-gray-700">Solve Full Self-Driving (FSD):</strong> Aggressively invest in the data, compute, and AI talent needed to solve vision-based autonomous driving, which the company sees as the key to unlocking a multi-trillion-dollar robotaxi opportunity.</li>
                        <li><strong class="font-semibold text-gray-700">Lead in Manufacturing:</strong> Revolutionize manufacturing processes with innovations like the "unboxed" manufacturing system and the deployment of Optimus robots to drive down costs and scale production.</li>
                        <li><strong class="font-semibold text-gray-700">Expand the Energy Business:</strong> Grow the deployment of its energy storage solutions (Megapack and Powerwall) to support the global electrical grid's transition to renewables.</li>
                        <li><strong class="font-semibold text-gray-700">Direct-to-Consumer Model:</strong> Maintain full control over its sales, service, and charging infrastructure to own the entire customer relationship and provide a superior experience.</li>
                    </ul>
                </div>
                <div class="kpi-card bg-violet-50 border-violet-200">
                    <p class="kpi-label">Cumulative Vehicles Produced</p>
                    <p class="kpi-value text-violet-600">> 6 Million</p>
                    <p class="content-text text-sm mt-2">Represents the massive scale of Tesla's global fleet, which provides a continuous stream of real-world driving data that is critical for training its FSD neural networks.</p>
                </div>
            </div>
        </section>

        <section id="segments" class="section-card scroll-mt-20">
            <h2 class="section-title">How Tesla Makes Money: Automotive and Energy</h2>
            <p class="content-text mb-6">Tesla's business is organized into two primary segments. The Automotive segment is the current engine of the company, generating the vast majority of revenue and all of the profits. The Energy Generation and Storage segment, while still relatively small, represents a significant long-term growth opportunity as the world's energy infrastructure is modernized.</p>

            <div class="mb-6 border-b border-stone-200">
                <nav class="-mb-px flex space-x-4" aria-label="Tabs">
                    <button class="segment-tab-button active" data-target="automotive">Automotive</button>
                    <button class="segment-tab-button" data-target="energy">Energy Generation & Storage</button>
                </nav>
            </div>

            <div id="segmentDetails">
                <div id="automotiveContent" class="segment-content">
                    <h3 class="subsection-title">Automotive (~90% of Revenue)</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <p class="content-text mb-2">This segment includes the design, development, manufacturing, and sale of high-performance electric vehicles. It also includes revenue from the sale of Full Self-Driving (FSD) software, regulatory credits, and vehicle servicing. After a period of rapid growth, this segment is currently navigating a more challenging global EV market.</p>
                             <ul class="list-disc list-inside content-text space-y-1 pl-4 mt-4">
                                <li><strong>Key Products:</strong> Model 3, Model Y, Model S, Model X, Cybertruck.</li>
                             </ul>
                        </div>
                        <div class="chart-container h-72 md:h-80">
                            <canvas id="revenueBreakdownChart"></canvas>
                        </div>
                    </div>
                </div>
                <div id="energyContent" class="segment-content hidden">
                    <h3 class="subsection-title">Energy Generation & Storage (~7% of Revenue)</h3>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div>
                            <p class="content-text mb-2">This segment focuses on the design, manufacturing, installation, and sale of solar energy generation and energy storage products. The key growth driver is the Megapack, a large-scale, utility-grade battery storage solution that is critical for stabilizing electrical grids that have a high penetration of intermittent renewables.</p>
                             <ul class="list-disc list-inside content-text space-y-1 pl-4 mt-4">
                                <li><strong>Key Products:</strong> Megapack, Powerwall, Solar Roof.</li>
                             </ul>
                        </div>
                         <div class="kpi-card bg-sky-50 border-sky-200">
                             <p class="kpi-label">Energy Storage Deployments</p>
                             <p class="kpi-value text-sky-600">Rapid Growth</p>
                             <p class="content-text text-sm mt-2">The energy storage business is growing at a much faster rate than the automotive business, positioning it to become a more significant part of the company in the future.</p>
                         </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="financials" class="section-card scroll-mt-20">
            <h2 class="section-title">Financial Deep Dive</h2>
            <p class="content-text mb-6">Tesla's financial performance has been characterized by explosive top-line growth and, until recently, expanding automotive gross margins. The company is currently navigating a period of significant investment in future growth (AI compute, new factories) and a more competitive EV market, which has put pressure on near-term profitability. Generating sustainable free cash flow remains a key priority.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title">Fiscal Year Trends (FY22-FY24)</h3>
                    <div class="mb-4">
                        <label for="yearlyMetricSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Annual Metric:</label>
                        <select id="yearlyMetricSelect" class="block w-full p-2 border border-stone-300 rounded-md shadow-sm focus:ring-violet-500 focus:border-violet-500">
                            <option value="totalRevenue" selected>Total Revenue ($B)</option>
                            <option value="operatingIncome">Operating Income ($B)</option>
                        </select>
                    </div>
                    <div id="yearlyFinancialChartContainer" class="chart-container h-80 max-w-full">
                        <canvas id="yearlyFinancialChart"></canvas>
                    </div>
                </div>

                <div>
                    <h3 class="subsection-title">Quarterly Trends (Recent 8 Qtrs)</h3>
                     <div class="mb-4">
                        <label for="quarterlyMetricSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Quarterly Metric:</label>
                        <select id="quarterlyMetricSelect" class="block w-full p-2 border border-stone-300 rounded-md shadow-sm focus:ring-violet-500 focus:border-violet-500">
                             <option value="totalRevenue" selected>Total Revenue ($B)</option>
                             <option value="operatingIncome">Operating Income ($B)</option>
                        </select>
                    </div>
                    <div id="quarterlyFinancialChartContainer" class="chart-container h-80 max-w-full">
                        <canvas id="quarterlyFinancialChart"></canvas>
                    </div>
                </div>
            </div>
             <p class="content-text text-sm mt-6 text-center">The financial charts show a period of rapid growth followed by a more recent moderation in revenue and a compression in operating margins due to price cuts and investments.</p>
        </section>

        <section id="competition" class="section-card scroll-mt-20">
            <h2 class="section-title">Competitive Moat: A Multi-Faceted Fortress</h2>
            <p class="content-text mb-6">Tesla has built a powerful and multi-layered competitive moat based on its brand, technology, manufacturing prowess, and proprietary infrastructure, which collectively create significant advantages over its rivals.</p>
            
            <div class="grid md-grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title !mt-0">Key Moats</h3>
                    <ul class="list-none space-y-3">
                        <li class="flex items-start">
                            <span class="text-violet-500 mr-2 mt-1">‚ûî</span>
                            <span class="content-text"><strong class="text-gray-700">Brand & Demand Generation:</strong> Tesla has one of the most powerful brands in the world, enabling it to generate massive demand with a $0 advertising budget. This is a profound and durable cost advantage.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-violet-500 mr-2 mt-1">‚ûî</span>
                            <span class="content-text"><strong class="text-gray-700">Technology & Data Lead in AI:</strong> With millions of vehicles on the road equipped with its hardware, Tesla has access to a vast and unparalleled dataset of real-world driving miles, which is a critical advantage in the race to solve autonomous driving.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-violet-500 mr-2 mt-1">‚ûî</span>
                            <span class="content-text"><strong class="text-gray-700">The Supercharger Network:</strong> Tesla's proprietary global network of fast chargers is a significant competitive advantage, offering a seamless and reliable charging experience that competitors are now seeking to join, further solidifying its standard.</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="subsection-title !mt-0">Primary Competitors</h3>
                     <ul class="list-none space-y-3">
                        <li class="flex items-start">
                            <span class="text-sky-500 mr-2 mt-1">‚óè</span>
                            <span class="content-text"><strong class="text-gray-700">Chinese EV Makers (BYD, NIO, etc.):</strong> A host of innovative and highly competitive Chinese automakers represent the most significant challenge to Tesla's global market share.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-sky-500 mr-2 mt-1">‚óè</span>
                            <span class="content-text"><strong class="text-gray-700">Legacy Automakers (Ford, GM, VW):</strong> Traditional auto giants are investing tens of billions to transition their fleets to electric, creating significant competition.</span>
                        </li>
                         <li class="flex items-start">
                            <span class="text-sky-500 mr-2 mt-1">‚óè</span>
                            <span class="content-text"><strong class="text-gray-700">Other Autonomous Driving Companies:</strong> Companies like Waymo (Google) and Cruise (GM) are also competing to solve autonomous driving, albeit with a different technological approach.</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="outlook" class="section-card scroll-mt-20">
            <h2 class="section-title">Strategic Outlook: Risks & Rewards</h2>
            <p class="content-text mb-6">Investing in Tesla is a bet on its visionary, and often controversial, CEO and the company's ability to execute on a series of ambitious, world-changing projects. The potential reward is immense, but the path is fraught with significant execution risk and intense competition.</p>
            <div class="grid md-grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title !mt-0 text-teal-600">Rewards & Opportunities üöÄ</h3>
                    <ul class="list-disc list-inside content-text space-y-2 pl-4">
                        <li><strong>Solving Autonomy (FSD):</strong> A successful rollout of a truly autonomous robotaxi network would be a paradigm shift for transportation and could unlock trillions of dollars in market value.</li>
                        <li><strong>The Optimus Humanoid Robot:</strong> A functional humanoid robot that can perform tasks in manufacturing and logistics could solve major labor shortages and be a larger market than the automotive business.</li>
                        <li><strong>Energy Storage Growth:</strong> The Megapack business is growing exponentially and is positioned to be a major player in the multi-trillion dollar market for grid modernization and energy storage.</li>
                        <li><strong>Manufacturing Innovation:</strong> Tesla's relentless focus on reducing the cost of manufacturing could provide a durable long-term margin advantage.</li>
                    </ul>
                </div>
                <div>
                    <h3 class="subsection-title !mt-0 text-orange-600">Risks & Challenges üìâ</h3>
                    <ul class="list-disc list-inside content-text space-y-2 pl-4">
                        <li><strong>Execution Risk on "Moonshot" Projects:</strong> The timelines for solving FSD and deploying a useful humanoid robot are highly uncertain. Failure to deliver on these ambitious goals could lead to a significant re-evaluation of the company's valuation.</li>
                        <li><strong>Intense Competition:</strong> The global EV market is becoming increasingly crowded and competitive, which is putting pressure on Tesla's pricing power and market share.</li>
                        <li><strong>Key Person Risk:</strong> The company's success and vision are deeply intertwined with its CEO, Elon Musk. His controversial nature and involvement in multiple other ventures create a unique and significant risk.</li>
                        <li><strong>Regulatory & Legal Scrutiny:</strong> Tesla faces ongoing scrutiny and legal challenges regarding the safety and marketing of its Autopilot and FSD systems.</li>
                    </ul>
                </div>
            </div>
        </section>

        <footer class="bg-stone-800 text-stone-300 py-8 text-center mt-12">
            <p class="text-sm">&copy; <span id="currentYearFooter"></span> TickerHack Deep Research. For informational purposes only.</p>
            <p class="text-xs mt-1">Data synthesized from Tesla, Inc. public filings (SEC reports), press releases, and credible financial data providers as of July 2025.</p>
        </footer>

    <script>
        document.getElementById('currentYearFooter').textContent = new Date().getFullYear();

        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-button');
        const mobileMenuEl = document.getElementById('mobile-menu');
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenuEl.classList.toggle('hidden');
            mobileMenuBtn.querySelectorAll('svg').forEach(svg => svg.classList.toggle('hidden'));
        });
        
        // Smooth scroll and active nav link highlighting
        const navLinks = document.querySelectorAll('header nav a[href^="#"]');
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                if (mobileMenuEl && !mobileMenuEl.classList.contains('hidden')) {
                    mobileMenuBtn.click(); // Close mobile menu if open
                }
                navLinks.forEach(l => l.classList.remove('active'));
                e.currentTarget.classList.add('active');
            });
        });
        
        // Segment Tabs
        const segmentTabs = document.querySelectorAll('.segment-tab-button');
        const segmentContents = document.querySelectorAll('.segment-content');
        segmentTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                segmentTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                const targetId = tab.dataset.target + 'Content';
                segmentContents.forEach(content => {
                    content.id === targetId ? content.classList.remove('hidden') : content.classList.add('hidden');
                });
            });
        });

        // Chart.js Global Config
        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.color = '#4B5563';

        const CHART_COLORS = {
            violet: '#A78BFA',
            sky: '#7DD3FC',
            orange: '#FDBA74',
            teal: '#5EEAD4'
        };

        // Revenue Breakdown Chart
        const revenueBreakdownCtx = document.getElementById('revenueBreakdownChart').getContext('2d');
        new Chart(revenueBreakdownCtx, {
            type: 'doughnut',
            data: {
                labels: ['Automotive', 'Energy, Gen & Storage', 'Services & Other'],
                datasets: [{
                    data: [81, 8, 11], // Approximate percentages for Q1 2025
                    backgroundColor: [CHART_COLORS.violet, CHART_COLORS.sky, CHART_COLORS.teal],
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { position: 'bottom' }, title: { display: true, text: 'Revenue by Segment (Q1 2025)' } }
            }
        });

        // --- FINANCIAL CHARTS LOGIC ---

        // Fiscal Year ends December 31
        const yearlyDataStore = {
            labels: ['FY22', 'FY23', 'FY24'],
            totalRevenue: {
                datasets: [ { label: 'Total Revenue ($B)', data: [81.46, 96.77, 94.75], backgroundColor: CHART_COLORS.violet + 'BF', borderColor: CHART_COLORS.violet } ],
                yAxisLabel: 'Billions of USD'
            },
            operatingIncome: {
                datasets: [ { label: 'Operating Income ($B)', data: [13.66, 8.89, 6.78], backgroundColor: CHART_COLORS.sky + 'BF', borderColor: CHART_COLORS.sky } ],
                yAxisLabel: 'Billions of USD'
            }
        };

        // Quarters are fiscal quarters
        const quarterlyDataStore = {
            labels: ['Q2 23', 'Q3 23', 'Q4 23', 'Q1 24', 'Q2 24', 'Q3 24', 'Q4 24', 'Q1 25'],
            totalRevenue: {
                datasets: [ { label: 'Total Revenue ($B)', data: [24.93, 23.35, 25.17, 21.30, 22.10, 23.50, 25.80, 22.31], backgroundColor: CHART_COLORS.violet + 'BF', borderColor: CHART_COLORS.violet } ],
                yAxisLabel: 'Billions of USD'
            },
            operatingIncome: {
                datasets: [ { label: 'Operating Income ($B)', data: [2.40, 1.76, 2.06, 1.17, 1.30, 1.60, 2.00, 1.15], backgroundColor: CHART_COLORS.teal + 'BF', borderColor: CHART_COLORS.teal } ],
                yAxisLabel: 'Billions of USD'
            }
        };

        let yearlyChart = null;
        let quarterlyChart = null;
        const yearlySelect = document.getElementById('yearlyMetricSelect');
        const quarterlySelect = document.getElementById('quarterlyMetricSelect');
        const yearlyCanvas = document.getElementById('yearlyFinancialChart').getContext('2d');
        const quarterlyCanvas = document.getElementById('quarterlyFinancialChart').getContext('2d');

        function createChart(canvas, existingChart, dataStore, metricKey) {
            if (existingChart) {
                existingChart.destroy();
            }
            const metricDetails = dataStore[metricKey];
            
            const datasets = metricDetails.datasets.map(ds => {
                 // Color bars red for negative values
                return {
                    ...ds,
                    backgroundColor: ds.data.map(value => value >= 0 ? ds.backgroundColor : CHART_COLORS.orange + 'BF'),
                    borderColor: ds.data.map(value => value >= 0 ? ds.borderColor : CHART_COLORS.orange),
                };
            });
            
            return new Chart(canvas, {
                type: 'bar',
                data: {
                    labels: dataStore.labels,
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                           display: false
                        }
                    },
                    scales: {
                        x: {},
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: metricDetails.yAxisLabel
                            },
                        }
                    }
                }
            });
        }
        
        yearlySelect.addEventListener('change', (event) => {
            yearlyChart = createChart(yearlyCanvas, yearlyChart, yearlyDataStore, event.target.value);
        });

        quarterlySelect.addEventListener('change', (event) => {
            quarterlyChart = createChart(quarterlyCanvas, quarterlyChart, quarterlyDataStore, event.target.value);
        });

        // Initial chart renders
        yearlyChart = createChart(yearlyCanvas, yearlyChart, yearlyDataStore, 'totalRevenue');
        quarterlyChart = createChart(quarterlyCanvas, quarterlyChart, quarterlyDataStore, 'totalRevenue');

    </script>
</body>
</html>

