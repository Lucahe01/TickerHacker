<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vistra Corp. (VST) - TickerHack Deep Research</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F4; /* stone-100 */
            color: #374151; /* gray-700 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) { /* md */
            .chart-container {
                height: 350px;
                max-height: 400px;
            }
        }
        .section-card {
            background-color: #FFFFFF;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.04); /* Softer shadow */
            padding: 1.5rem; /* p-6 */
            margin-bottom: 2rem; /* mb-8 */
        }
        .main-title {
            font-size: 2.25rem; /* text-4xl */
            font-weight: 700; /* font-bold */
            color: #1F2937; /* gray-800 */
            margin-bottom: 1rem;
            text-align: center;
        }
        .section-title {
            font-size: 1.875rem; /* text-3xl */
            font-weight: 600; /* font-semibold */
            color: #16A34A; /* green-600 */
            margin-bottom: 1.5rem; /* mb-6 */
            padding-bottom: 0.5rem; /* pb-2 */
            border-bottom: 2px solid #E7E5E4; /* stone-200 */
        }
        .subsection-title {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 600; /* font-semibold */
            color: #4ADE80; /* green-400 */
            margin-top: 1.5rem; /* mt-6 */
            margin-bottom: 1rem; /* mb-4 */
        }
        .content-text {
            line-height: 1.75;
            color: #4B5563; /* gray-600 */
            font-size: 0.95rem;
        }
        .highlight {
            color: #F97316; /* orange-500 */
            font-weight: 600;
        }
        .tab-button {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            font-weight: 500;
            font-size: 0.875rem; /* text-sm */
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            background-color: #E7E5E4; /* stone-200 */
            color: #374151; /* gray-700 */
            border: 1px solid transparent;
        }
        .tab-button.active {
            background-color: #16A34A; /* green-600 */
            color: #FFFFFF;
            border-color: #15803D; /* green-700 */
        }
        .nav-link {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            font-weight: 500;
            color: #374151; /* gray-700 */
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            white-space: nowrap;
        }
        .nav-link:hover, .nav-link.active {
            background-color: #16A34A; /* green-600 */
            color: #FFFFFF;
        }
        .kpi-card {
            background-color: #F9FAFB; /* gray-50 */
            border: 1px solid #E7E5E4; /* stone-200 */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 1rem;
            text-align: center;
        }
        .kpi-label {
            font-size: 0.875rem; /* text-sm */
            color: #6B7280; /* gray-500 */
            margin-bottom: 0.25rem;
        }
        .kpi-value {
            font-size: 1.75rem; /* text-2xl or 3xl */
            font-weight: 600;
            color: #1F2937; /* gray-800 */
        }
    </style>
</head>
<body class="min-h-screen">

    <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md shadow-md">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold" style="color: #16A34A;">Vistra Corp. (VST) Analysis</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-1 lg:space-x-2">
                        <a href="#overview" class="nav-link">Overview</a>
                        <a href="#segments" class="nav-link">Business Segments</a>
                        <a href="#financials" class="nav-link">Financials</a>
                        <a href="#competition" class="nav-link">Competitive Moat</a>
                        <a href="#outlook" class="nav-link">Outlook</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-green-500" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
            <div class="md:hidden hidden" id="mobile-menu">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <a href="#overview" class="nav-link block text-base">Overview</a>
                    <a href="#segments" class="nav-link block text-base">Business Segments</a>
                    <a href="#financials" class="nav-link block text-base">Financials</a>
                    <a href="#competition" class="nav-link block text-base">Competitive Moat</a>
                    <a href="#outlook" class="nav-link block text-base">Outlook</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-6 lg:p-8 mt-4">

        <section id="overview" class="section-card scroll-mt-20">
            <h2 class="section-title">Vistra: An Integrated U.S. Power Titan</h2>
            <p class="content-text mb-6">Vistra Corp. is a leading integrated power company in the United States, operating a large and diverse portfolio of electricity generation facilities and serving as the nation's largest competitive retail electricity provider. With a total generating capacity of approximately 41,000 megawatts (MW), Vistra powers millions of homes and businesses. The company's strategy is built on a powerful integrated model, combining a low-cost, dispatchable generation fleet with a vast retail customer base. Following its recent acquisition of Energy Harbor, Vistra has significantly expanded its zero-carbon nuclear fleet, positioning itself as a key player in the clean energy transition and a critical power supplier for the high-demand data center sector.</p>
            
            <div class="grid md:grid-cols-2 gap-6 items-start">
                <div>
                    <h3 class="subsection-title !mt-0">Core Business Strategy</h3>
                    <p class="content-text mb-4">Vistra's success is driven by a clear, focused strategy:</p>
                    <ul class="list-disc list-inside content-text space-y-1 pl-4">
                        <li><strong class="font-semibold text-gray-700">Leverage Vertical Integration:</strong> Using its large retail electricity business to provide a stable earnings base and a natural hedge against the volatility of its wholesale generation operations.</li>
                        <li><strong class="font-semibold text-gray-700">Fleet Transformation & Growth:</strong> Actively growing its zero-carbon generation fleet, highlighted by the major acquisition of Energy Harbor's nuclear assets, while maintaining a reliable, dispatchable thermal fleet.</li>
                        <li><strong class="font-semibold text-gray-700">Disciplined Capital Allocation:</strong> A strong commitment to returning value to shareholders through aggressive share repurchase programs and a growing dividend, while also strengthening its balance sheet.</li>
                        <li><strong class="font-semibold text-gray-700">Powering the AI Boom:</strong> Positioning its reliable, 24/7 nuclear and natural gas fleet to meet the surging electricity demand from data centers and artificial intelligence.</li>
                    </ul>
                </div>
                <div class="kpi-card bg-green-50 border-green-200">
                    <p class="kpi-label">Retail Customer Base</p>
                    <p class="kpi-value text-green-600">~5 Million</p>
                    <p class="content-text text-sm mt-2">The largest competitive retail electricity provider in the U.S., serving customers across 20 states.</p>
                </div>
            </div>
        </section>

        <section id="segments" class="section-card scroll-mt-20">
            <h2 class="section-title">How Vistra Makes Money: Generation & Retail</h2>
            <p class="content-text mb-6">Vistra operates a classic integrated model. The **Generation** business produces electricity from a diverse portfolio of fuel sources and sells it into competitive wholesale markets. The **Retail** business sells electricity and related services directly to millions of customers. This structure allows Vistra to capture value across the entire energy supply chain.</p>

            <div class="mb-6 border-b border-stone-200">
                <nav class="-mb-px flex space-x-4" aria-label="Tabs">
                    <button class="segment-tab-button active" data-target="generation">Generation Fleet</button>
                    <button class="segment-tab-button" data-target="retail">Retail Operations</button>
                </nav>
            </div>

            <div id="segmentDetails">
                <div id="generationContent" class="segment-content">
                    <h3 class="subsection-title">Generation Fleet</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <p class="content-text mb-2">Vistra's ~41 Gigawatt (GW) generation fleet is one of the largest and most diverse in the country. A key strength is its large portfolio of <span class="highlight">dispatchable</span> power sources (natural gas and nuclear) that can provide reliable, 24/7 power, which is increasingly valuable as intermittent renewables grow.</p>
                             <ul class="list-disc list-inside content-text space-y-1 pl-4 mt-4">
                                <li><strong>Natural Gas:</strong> The largest part of the fleet, providing essential flexibility and reliability to the grid.</li>
                                <li><strong>Nuclear:</strong> Following the Energy Harbor acquisition, Vistra now operates the #2 competitive nuclear fleet in the U.S., a source of zero-carbon baseload power.</li>
                                <li><strong>Coal:</strong> A legacy fleet that provides low-cost power, though the company is transitioning away from it over the long term.</li>
                                <li><strong>Renewables & Storage:</strong> A growing portfolio of solar farms and battery energy storage systems.</li>
                            </ul>
                        </div>
                        <div class="chart-container h-72 md:h-80">
                            <canvas id="generationMixChart"></canvas>
                        </div>
                    </div>
                </div>
                <div id="retailContent" class="segment-content hidden">
                    <h3 class="subsection-title">Retail Operations</h3>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div>
                            <p class="content-text mb-2">Vistra is the leading residential electricity retailer in the United States. This segment provides stable, predictable earnings that help cushion the volatility of the wholesale generation market. The business operates under numerous well-known regional brands.</p>
                            <ul class="list-disc list-inside content-text space-y-1 pl-4 mt-4">
                                <li><strong>Scale:</strong> Serves approximately 5 million customers in 20 states and the District of Columbia.</li>
                                <li><strong>Key Brands:</strong> Includes TXU Energy, Dynegy, Ambit Energy, and several others.</li>
                                <li><strong>Strategic Hedge:</strong> The retail business creates a "natural hedge" by providing a guaranteed buyer for the electricity produced by Vistra's generation fleet, reducing exposure to volatile wholesale price swings.</li>
                            </ul>
                        </div>
                        <div class="kpi-card bg-green-50 border-green-200 p-6 flex flex-col justify-center">
                            <p class="kpi-label">Primary Market</p>
                            <p class="kpi-value text-green-600">ERCOT (Texas)</p>
                            <p class="content-text text-sm mt-2">Vistra has a commanding presence in the Texas electricity market, which is one of the largest and fastest-growing in the nation.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="financials" class="section-card scroll-mt-20">
            <h2 class="section-title">Financial Deep Dive</h2>
            <p class="content-text mb-6">As an independent power producer, Vistra's financials can be volatile, heavily influenced by weather and commodity prices. Therefore, the company guides investors to focus on **Adjusted EBITDA**, a non-GAAP metric that reflects ongoing operational profitability. The company's financial strategy focuses on generating strong free cash flow to fund shareholder returns and debt reduction.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title">Fiscal Year Trends (2020-2024)</h3>
                    <div class="mb-4">
                        <label for="yearlyMetricSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Annual Metric:</label>
                        <select id="yearlyMetricSelect" class="block w-full p-2 border border-stone-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500">
                            <option value="adjEbitda" selected>Adjusted EBITDA ($B)</option>
                            <option value="revenue">Total Revenue ($B)</option>
                            <option value="opIncome">Operating Income ($B)</option>
                            <option value="opCashFlow">Operating Cash Flow ($B)</option>
                        </select>
                    </div>
                    <div id="yearlyFinancialChartContainer" class="chart-container h-80 max-w-full">
                        <canvas id="yearlyFinancialChart"></canvas>
                    </div>
                </div>

                <div>
                    <h3 class="subsection-title">Quarterly Trends (Recent 8 Qtrs)</h3>
                     <div class="mb-4">
                        <label for="quarterlyMetricSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Quarterly Metric:</label>
                        <select id="quarterlyMetricSelect" class="block w-full p-2 border border-stone-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500">
                             <option value="adjEbitda" selected>Adjusted EBITDA ($B)</option>
                            <option value="revenue">Total Revenue ($B)</option>
                        </select>
                    </div>
                    <div id="quarterlyFinancialChartContainer" class="chart-container h-80 max-w-full">
                        <canvas id="quarterlyFinancialChart"></canvas>
                    </div>
                </div>
            </div>
             <p class="content-text text-sm mt-6 text-center">The financial charts show the inherent volatility in the business. The significant negative impact in 2021 was due to Winter Storm Uri. The strong performance since then reflects favorable market conditions and strong operational execution. Adjusted EBITDA is the clearest indicator of core performance.</p>
        </section>

        <section id="competition" class="section-card scroll-mt-20">
            <h2 class="section-title">Competitive Moat: The Integrated Powerhouse</h2>
            <p class="content-text mb-6">Vistra's competitive moat is built on the synergistic combination of its vast generation fleet and its market-leading retail business. This integrated structure, combined with the dispatchable nature of its assets, creates a durable advantage in the modern energy market.</p>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title !mt-0">Key Moats</h3>
                    <ul class="list-none space-y-3">
                        <li class="flex items-start">
                            <span class="text-green-500 mr-2 mt-1">➔</span>
                            <span class="content-text"><strong class="text-gray-700">Vertical Integration & Scale:</strong> The combination of being a top-tier power generator and the #1 residential retailer creates a powerful natural hedge. This scale provides efficiencies and market intelligence that smaller, non-integrated players cannot match.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-green-500 mr-2 mt-1">➔</span>
                            <span class="content-text"><strong class="text-gray-700">Dispatchable & Reliable Fleet:</strong> In an era of increasing reliance on intermittent renewables, Vistra's large fleet of 24/7 nuclear and flexible natural gas plants is a critical competitive advantage. These assets are essential for grid reliability and are perfectly suited to meet the constant power demand from AI and data centers.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-green-500 mr-2 mt-1">➔</span>
                            <span class="content-text"><strong class="text-gray-700">Portfolio Diversity:</strong> Operating a wide range of assets (nuclear, gas, coal, solar) across multiple key U.S. markets (especially ERCOT) allows Vistra to optimize its operations based on regional prices and demand, reducing reliance on any single market or fuel source.</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="subsection-title !mt-0">Primary Competitors</h3>
                     <ul class="list-none space-y-3">
                        <li class="flex items-start">
                            <span class="text-green-400 mr-2 mt-1">●</span>
                            <span class="content-text"><strong class="text-gray-700">Other IPPs & Utilities:</strong> Competes with other large power generators like Constellation Energy (especially in nuclear), NRG Energy (in retail and generation), and NextEra Energy (a leader in renewables).</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-green-400 mr-2 mt-1">●</span>
                            <span class="content-text"><strong class="text-gray-700">Retail Electricity Providers:</strong> Competes with numerous other retail providers in the markets it serves, including NRG, Green Mountain Energy, and others.</span>
                        </li>
                         <li class="flex items-start">
                            <span class="text-green-400 mr-2 mt-1">●</span>
                             <span class="content-text"><strong class="text-gray-700">Renewable Energy Developers:</strong> While also a participant, Vistra competes with companies that are purely focused on developing wind, solar, and battery storage projects.</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="outlook" class="section-card scroll-mt-20">
            <h2 class="section-title">Strategic Outlook: Risks & Rewards</h2>
            <p class="content-text mb-6">Vistra's future is a compelling story of transformation and opportunity, balanced by the inherent risks of the volatile energy sector. The company's ability to capitalize on the soaring demand for reliable power while navigating commodity cycles will define its success.</p>
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title !mt-0 text-teal-600">Rewards & Opportunities 🚀</h3>
                    <ul class="list-disc list-inside content-text space-y-2 pl-4">
                        <li><strong>AI & Data Center Demand:</strong> The number one tailwind. The exponential growth in electricity demand from AI represents a massive opportunity for Vistra's reliable nuclear and natural gas fleet.</li>
                        <li><strong>Nuclear Power's Renaissance:</strong> Increased appreciation for nuclear as a reliable, zero-carbon energy source, supported by government policy, enhances the value of Vistra's newly acquired nuclear assets.</li>
                        <li><strong>Value from Integration:</strong> Continued opportunity to optimize the integrated model, using the retail arm to create stable, long-term contracts that de-risk the generation business.</li>
                        <li><strong>Aggressive Shareholder Returns:</strong> The potential for significant capital appreciation driven by one of the largest share buyback programs in the S&P 500.</li>
                    </ul>
                </div>
                <div>
                    <h3 class="subsection-title !mt-0 text-orange-600">Risks & Challenges 📉</h3>
                    <ul class="list-disc list-inside content-text space-y-2 pl-4">
                        <li><strong>Commodity Price Volatility:</strong> Despite hedging, earnings remain highly exposed to swings in natural gas and wholesale power prices, which can cause significant stock volatility.</li>
                        <li><strong>Extreme Weather Events:</strong> The risk of operational failures and extreme financial losses during severe weather events like heatwaves or winter storms remains a key concern.</li>
                        <li><strong>Regulatory and Political Risk:</strong> Changes in environmental policies targeting fossil fuels or shifts in energy market rules could negatively impact the profitability of the thermal fleet.</li>
                        <li><strong>Significant Debt Load:</strong> The company carries a substantial debt balance, and higher interest rates could increase financing costs and limit financial flexibility.</li>
                    </ul>
                </div>
            </div>
        </section>

        <footer class="bg-stone-800 text-stone-300 py-8 text-center mt-12">
            <p class="text-sm">&copy; <span id="currentYearFooter"></span> TickerHack Deep Research. For informational purposes only.</p>
            <p class="text-xs mt-1">Data synthesized from Vistra Corp. public filings and credible financial news sources as of June 2025.</p>
        </footer>

    <script>
        document.getElementById('currentYearFooter').textContent = new Date().getFullYear();

        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-button');
        const mobileMenuEl = document.getElementById('mobile-menu');
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenuEl.classList.toggle('hidden');
            mobileMenuBtn.querySelectorAll('svg').forEach(svg => svg.classList.toggle('hidden'));
        });
        
        // Smooth scroll and active nav link highlighting
        const navLinks = document.querySelectorAll('header nav a[href^="#"]');
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                if (!mobileMenuEl.classList.contains('hidden')) {
                    mobileMenuBtn.click(); // Close mobile menu if open
                }
                navLinks.forEach(l => l.classList.remove('active'));
                e.currentTarget.classList.add('active');
            });
        });
        
        // Segment Tabs
        const segmentTabs = document.querySelectorAll('.segment-tab-button');
        const segmentContents = document.querySelectorAll('.segment-content');
        segmentTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                segmentTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                const targetId = tab.dataset.target + 'Content';
                segmentContents.forEach(content => {
                    content.id === targetId ? content.classList.remove('hidden') : content.classList.add('hidden');
                });
            });
        });

        // Chart.js Global Config
        Chart.defaults.font.family = 'Inter, sans-serif';
        Chart.defaults.color = '#4B5563';

        const CHART_COLORS = {
            green: '#16A34A',
            sky: '#38BDF8',
            amber: '#F59E0B',
            stone: '#A8A29E',
            gray: '#4B5563',
            darkGreen: '#15803D'
        };

        // Generation Mix Chart (Doughnut)
        const generationMixCtx = document.getElementById('generationMixChart').getContext('2d');
        new Chart(generationMixCtx, {
            type: 'doughnut',
            data: {
                labels: ['Natural Gas', 'Coal', 'Nuclear', 'Renewables & Storage'],
                datasets: [{
                    data: [60, 17, 13, 10], // Post-Energy Harbor acquisition capacity mix (%)
                    backgroundColor: [CHART_COLORS.sky, CHART_COLORS.gray, CHART_COLORS.green, CHART_COLORS.amber],
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { position: 'bottom' }, title: { display: true, text: 'Generation Capacity Mix (%)' } }
            }
        });
        
        // --- FINANCIAL CHARTS LOGIC ---

        // Yearly Data Store
        const yearlyDataStore = {
            labels: ['FY20', 'FY21', 'FY22', 'FY23', 'FY24'],
            adjEbitda: { data: [3.27, -1.94, 4.96, 4.02, 3.75], label: 'Adjusted EBITDA ($B)', color: CHART_COLORS.darkGreen },
            revenue: { data: [11.96, 11.39, 29.88, 14.39, 15.65], label: 'Total Revenue ($B)', color: CHART_COLORS.green },
            opIncome: { data: [1.32, -5.39, 2.91, 1.83, 1.34], label: 'Operating Income ($B)', color: CHART_COLORS.sky },
            opCashFlow: { data: [2.51, -1.99, 3.23, 2.82, 3.01], label: 'Operating Cash Flow ($B)', color: CHART_COLORS.amber }
        };

        // Quarterly Data Store
        const quarterlyDataStore = {
            labels: ['Q2 23', 'Q3 23', 'Q4 23', 'Q1 24', 'Q2 24', 'Q3 24', 'Q4 24', 'Q1 25'],
            adjEbitda: { data: [1.21, 1.58, 0.49, 0.71, 1.35, 1.81, 0.75, 0.92], label: 'Adjusted EBITDA ($B)', color: CHART_COLORS.darkGreen },
            revenue: { data: [3.33, 4.41, 3.39, 3.26, 3.65, 4.89, 3.81, 3.55], label: 'Total Revenue ($B)', color: CHART_COLORS.green }
        };

        let yearlyChart = null;
        let quarterlyChart = null;
        const yearlySelect = document.getElementById('yearlyMetricSelect');
        const quarterlySelect = document.getElementById('quarterlyMetricSelect');
        const yearlyCanvas = document.getElementById('yearlyFinancialChart').getContext('2d');
        const quarterlyCanvas = document.getElementById('quarterlyFinancialChart').getContext('2d');

        function createChart(canvas, existingChart, dataStore, metricKey) {
            if (existingChart) {
                existingChart.destroy();
            }
            const metricDetails = dataStore[metricKey];
            return new Chart(canvas, {
                type: 'bar',
                data: {
                    labels: dataStore.labels,
                    datasets: [{
                        label: metricDetails.label,
                        data: metricDetails.data,
                        backgroundColor: metricDetails.color + 'BF', // with opacity
                        borderColor: metricDetails.color,
                        borderWidth: 1,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: false, title: { display: true, text: metricDetails.label.split('(')[1].replace(')','')} } },
                    plugins: { legend: { display: false } }
                }
            });
        }
        
        yearlySelect.addEventListener('change', (event) => {
            yearlyChart = createChart(yearlyCanvas, yearlyChart, yearlyDataStore, event.target.value);
        });

        quarterlySelect.addEventListener('change', (event) => {
            quarterlyChart = createChart(quarterlyCanvas, quarterlyChart, quarterlyDataStore, event.target.value);
        });

        // Initial chart renders
        yearlyChart = createChart(yearlyCanvas, yearlyChart, yearlyDataStore, 'adjEbitda');
        quarterlyChart = createChart(quarterlyCanvas, quarterlyChart, quarterlyDataStore, 'adjEbitda');

    </script>
</body>
</html>

