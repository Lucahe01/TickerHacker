<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equifax Inc. (EFX) - TickerHack Deep Research</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F4; /* stone-100 */
            color: #374151; /* gray-700 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) { /* md */
            .chart-container {
                height: 350px;
                max-height: 400px;
            }
        }
        .section-card {
            background-color: #FFFFFF;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.04); /* Softer shadow */
            padding: 1.5rem; /* p-6 */
            margin-bottom: 2rem; /* mb-8 */
        }
        .main-title {
            font-size: 2.25rem; /* text-4xl */
            font-weight: 700; /* font-bold */
            color: #1F2937; /* gray-800 */
            margin-bottom: 1rem;
            text-align: center;
        }
        .section-title {
            font-size: 1.875rem; /* text-3xl */
            font-weight: 600; /* font-semibold */
            color: #A78BFA; /* violet-400 */
            margin-bottom: 1.5rem; /* mb-6 */
            padding-bottom: 0.5rem; /* pb-2 */
            border-bottom: 2px solid #E7E5E4; /* stone-200 */
        }
        .subsection-title {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 600; /* font-semibold */
            color: #7DD3FC; /* sky-400 */
            margin-top: 1.5rem; /* mt-6 */
            margin-bottom: 1rem; /* mb-4 */
        }
        .content-text {
            line-height: 1.75;
            color: #4B5563; /* gray-600 */
            font-size: 0.95rem;
        }
        .highlight {
            color: #F97316; /* orange-500 */
            font-weight: 600;
        }
        .tab-button {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            font-weight: 500;
            font-size: 0.875rem; /* text-sm */
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            background-color: #E7E5E4; /* stone-200 */
            color: #374151; /* gray-700 */
            border: 1px solid transparent;
        }
        .tab-button.active {
            background-color: #A78BFA; /* violet-400 */
            color: #FFFFFF;
            border-color: #8B5CF6; /* violet-500 */
        }
        .nav-link {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            font-weight: 500;
            color: #374151; /* gray-700 */
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            white-space: nowrap;
        }
        .nav-link:hover, .nav-link.active {
            background-color: #A78BFA; /* violet-400 */
            color: #FFFFFF;
        }
        .kpi-card {
            background-color: #F9FAFB; /* gray-50 */
            border: 1px solid #E7E5E4; /* stone-200 */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 1rem;
            text-align: center;
        }
        .kpi-label {
            font-size: 0.875rem; /* text-sm */
            color: #6B7280; /* gray-500 */
            margin-bottom: 0.25rem;
        }
        .kpi-value {
            font-size: 1.75rem; /* text-2xl or 3xl */
            font-weight: 600;
            color: #1F2937; /* gray-800 */
        }
    </style>
</head>
<body class="min-h-screen">

    <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md shadow-md">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold" style="color: #A78BFA;">Equifax (EFX) Analysis</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-1 lg:space-x-2">
                        <a href="#overview" class="nav-link">Overview</a>
                        <a href="#segments" class="nav-link">Business Segments</a>
                        <a href="#financials" class="nav-link">Financials</a>
                        <a href="#competition" class="nav-link">Competitive Moat</a>
                        <a href="#outlook" class="nav-link">Outlook</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-violet-500" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
            <div class="md:hidden hidden" id="mobile-menu">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <a href="#overview" class="nav-link block text-base">Overview</a>
                    <a href="#segments" class="nav-link block text-base">Business Segments</a>
                    <a href="#financials" class="nav-link block text-base">Financials</a>
                    <a href="#competition" class="nav-link block text-base">Competitive Moat</a>
                    <a href="#outlook" class="nav-link block text-base">Outlook</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-6 lg:p-8 mt-4">

        <section id="overview" class="section-card scroll-mt-20">
            <h2 class="section-title">Equifax: A Data Giant's Cloud-Powered Transformation</h2>
            <p class="content-text mb-6">Equifax Inc. (NYSE: EFX) is a global data, analytics, and technology company, and one of the "big three" credit bureaus alongside Experian and TransUnion. The company plays an essential role in the global economy by providing the critical information and insights that businesses and governments rely on to make credit and risk decisions. After a landmark data breach in 2017, Equifax embarked on a massive, multi-billion dollar cloud technology transformation, which is now the cornerstone of its strategy to drive growth, innovation, and enhanced security. This analysis explores Equifax's diversified business model, its financial performance, and its strategic position in the evolving data economy.</p>
            
            <div class="grid md:grid-cols-2 gap-6 items-start">
                <div>
                    <h3 class="subsection-title !mt-0">Core Business Strategy: "The New EFX"</h3>
                    <p class="content-text mb-4">Equifax's strategy is focused on leveraging its new cloud capabilities and unique data assets:</p>
                    <ul class="list-disc list-inside content-text space-y-1 pl-4">
                        <li><strong class="font-semibold text-gray-700">Cloud-Native Innovation:</strong> Utilizing its proprietary Equifax Cloud and Data Fabric to rapidly develop and deploy new, multi-data solutions for its customers.</li>
                        <li><strong class="font-semibold text-gray-700">Expanding Differentiated Data:</strong> Growing its unique data assets, particularly its Workforce Solutions database ("The Work Number"), which provides income and employment verification.</li>
                        <li><strong class="font-semibold text-gray-700">Driving Non-Mortgage Growth:</strong> Focusing on growth in recession-resilient and higher-growth verticals like government, talent solutions, and non-mortgage consumer lending to diversify away from the cyclical mortgage market.</li>
                        <li><strong class="font-semibold text-gray-700">Strategic Bolt-On M&A:</strong> Acquiring smaller companies with unique data sets or technologies that can be integrated into the Equifax Cloud to enhance its product offerings.</li>
                    </ul>
                </div>
                <div class="kpi-card bg-violet-50 border-violet-200">
                    <p class="kpi-label">Workforce Solutions Revenue (Q1 2025)</p>
                    <p class="kpi-value text-violet-600">$618.6 Million</p>
                    <p class="content-text text-sm mt-2">As Equifax's largest and most profitable segment, the growth of Workforce Solutions is the primary driver of the company's overall financial performance and strategic differentiation.</p>
                </div>
            </div>
        </section>

        <section id="segments" class="section-card scroll-mt-20">
            <h2 class="section-title">How Equifax Makes Money: Three Core Segments</h2>
            <p class="content-text mb-6">Equifax's business is organized into three main segments, with its Workforce Solutions division being the key differentiator and growth engine that sets it apart from its credit bureau peers.</p>

            <div class="mb-6 border-b border-stone-200">
                <nav class="-mb-px flex space-x-4" aria-label="Tabs">
                    <button class="segment-tab-button active" data-target="ews">Workforce Solutions (EWS)</button>
                    <button class="segment-tab-button" data-target="usis">U.S. Information Solutions (USIS)</button>
                    <button class="segment-tab-button" data-target="international">International</button>
                </nav>
            </div>

            <div id="segmentDetails">
                <div id="ewsContent" class="segment-content">
                    <h3 class="subsection-title">Workforce Solutions (EWS)</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <p class="content-text mb-2">This is Equifax's largest and fastest-growing segment, representing over <span class="highlight">40%</span> of total revenue. Its core asset is "The Work Number," a massive proprietary database of income and employment records. This segment provides high-margin verification services to a wide range of customers.</p>
                             <ul class="list-disc list-inside content-text space-y-1 pl-4 mt-4">
                                <li><strong>Verification Services:</strong> Providing income and employment verification to mortgage lenders, auto lenders, government agencies, and pre-employment screeners.</li>
                                <li><strong>Employer Services:</strong> Offering services like unemployment claims management and I-9 compliance.</li>
                             </ul>
                        </div>
                        <div class="chart-container h-72 md:h-80">
                            <canvas id="revenueBreakdownChart"></canvas>
                        </div>
                    </div>
                </div>
                <div id="usisContent" class="segment-content hidden">
                    <h3 class="subsection-title">U.S. Information Solutions (USIS)</h3>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div>
                            <p class="content-text mb-2">This is the traditional credit bureau business in the United States. It provides consumer and commercial credit information to businesses to help them manage risk and make lending decisions. While still a large and profitable business, its growth is more tied to the cyclical mortgage market.</p>
                            <ul class="list-disc list-inside content-text space-y-1 pl-4 mt-4">
                                 <li><strong>Online Information Solutions:</strong> Selling credit reports and scores to lenders.</li>
                                 <li><strong>Mortgage Solutions:</strong> Providing specialized credit reports for the mortgage industry.</li>
                                 <li><strong>Financial Marketing Services:</strong> Helping lenders identify and market to potential customers.</li>
                            </ul>
                        </div>
                         <div class="kpi-card bg-sky-50 border-sky-200">
                             <p class="kpi-label">Market Position</p>
                             <p class="kpi-value text-sky-600">Oligopoly</p>
                             <p class="content-text text-sm mt-2">USIS operates in a classic oligopoly with Experian and TransUnion, which provides a stable competitive environment and strong pricing power.</p>
                         </div>
                    </div>
                </div>
                 <div id="internationalContent" class="segment-content hidden">
                    <h3 class="subsection-title">International</h3>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div>
                            <p class="content-text mb-2">This segment includes Equifax's credit bureau and data and analytics businesses in 23 countries across Europe, Latin America, Canada, and Asia Pacific. It provides geographic diversification and opportunities for growth in emerging markets.</p>
                        </div>
                        <div class="chart-container h-72 md:h-80">
                            <canvas id="internationalRevenueChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="financials" class="section-card scroll-mt-20">
            <h2 class="section-title">Financial Deep Dive</h2>
            <p class="content-text mb-6">Equifax has delivered consistent revenue growth, driven by the strong performance of its non-mortgage businesses, particularly Workforce Solutions. While the downturn in the U.S. mortgage market has been a headwind, the company's diversified model has provided resilience. Equifax is highly profitable and generates strong free cash flow, which it uses to fund its technology investments, make strategic acquisitions, and return capital to shareholders through dividends and buybacks.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title">Fiscal Year Trends (2020-2024)</h3>
                    <div class="mb-4">
                        <label for="yearlyMetricSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Annual Metric:</label>
                        <select id="yearlyMetricSelect" class="block w-full p-2 border border-stone-300 rounded-md shadow-sm focus:ring-violet-500 focus:border-violet-500">
                            <option value="totalRevenue" selected>Total Revenue ($B)</option>
                            <option value="netIncome">Net Income ($M)</option>
                            <option value="freeCashFlow">Free Cash Flow ($M)</option>
                        </select>
                    </div>
                    <div id="yearlyFinancialChartContainer" class="chart-container h-80 max-w-full">
                        <canvas id="yearlyFinancialChart"></canvas>
                    </div>
                </div>

                <div>
                    <h3 class="subsection-title">Quarterly Trends (Recent 8 Qtrs)</h3>
                     <div class="mb-4">
                        <label for="quarterlyMetricSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Quarterly Metric:</label>
                        <select id="quarterlyMetricSelect" class="block w-full p-2 border border-stone-300 rounded-md shadow-sm focus:ring-violet-500 focus:border-violet-500">
                             <option value="totalRevenue" selected>Total Revenue ($B)</option>
                             <option value="adjEps">Adjusted EPS ($)</option>
                        </select>
                    </div>
                    <div id="quarterlyFinancialChartContainer" class="chart-container h-80 max-w-full">
                        <canvas id="quarterlyFinancialChart"></canvas>
                    </div>
                </div>
            </div>
             <p class="content-text text-sm mt-6 text-center">The financial charts show stable and consistent growth in revenue, profitability, and cash flow, highlighting the resilience of Equifax's diversified business model.</p>
        </section>

        <section id="competition" class="section-card scroll-mt-20">
            <h2 class="section-title">Competitive Moat: The Power of Differentiated Data</h2>
            <p class="content-text mb-6">Equifax's most significant competitive advantage is its portfolio of unique and differentiated data assets, particularly "The Work Number." This, combined with its new cloud-native technology platform and its position in the credit bureau oligopoly, creates a wide and durable economic moat.</p>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title !mt-0">Key Moats</h3>
                    <ul class="list-none space-y-3">
                        <li class="flex items-start">
                            <span class="text-violet-500 mr-2 mt-1">➔</span>
                            <span class="content-text"><strong class="text-gray-700">Differentiated Data Assets:</strong> "The Work Number" is a unique and proprietary database of income and employment information that competitors cannot easily replicate. This data is highly valuable to lenders and gives Equifax a significant advantage.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-violet-500 mr-2 mt-1">➔</span>
                            <span class="content-text"><strong class="text-gray-700">Credit Bureau Oligopoly:</strong> The U.S. credit reporting industry is dominated by Equifax, Experian, and TransUnion. The high barriers to entry and the mission-critical nature of their data create a stable and profitable market structure.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-violet-500 mr-2 mt-1">➔</span>
                            <span class="content-text"><strong class="text-gray-700">Cloud Technology Platform:</strong> The multi-billion dollar investment in the Equifax Cloud has modernized the company's infrastructure, enabling faster innovation, better security, and the ability to create new multi-data products.</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="subsection-title !mt-0">Primary Competitors</h3>
                     <ul class="list-none space-y-3">
                        <li class="flex items-start">
                            <span class="text-sky-500 mr-2 mt-1">●</span>
                            <span class="content-text"><strong class="text-gray-700">Experian (EXPN.L) & TransUnion (TRU):</strong> The other two major credit bureaus, competing directly with Equifax's USIS and International segments.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-sky-500 mr-2 mt-1">●</span>
                            <span class="content-text"><strong class="text-gray-700">Alternative Data Providers:</strong> A growing number of companies are offering alternative data sets (e.g., utility payments, rental history) that can be used to assess creditworthiness.</span>
                        </li>
                         <li class="flex items-start">
                            <span class="text-sky-500 mr-2 mt-1">●</span>
                            <span class="content-text"><strong class="text-gray-700">Manual Verification:</strong> In the Workforce Solutions segment, the primary competition is often the manual, inefficient process of companies verifying employment and income information themselves.</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="outlook" class="section-card scroll-mt-20">
            <h2 class="section-title">Strategic Outlook: Risks & Rewards</h2>
            <p class="content-text mb-6">Equifax has successfully navigated a major technological transformation and is now positioned to leverage its new capabilities and unique data assets to drive growth. The company's future success will depend on its ability to continue to innovate, execute on its growth strategy, and manage the ever-present risks of data security and regulation.</p>
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title !mt-0 text-teal-600">Rewards & Opportunities 🚀</h3>
                    <ul class="list-disc list-inside content-text space-y-2 pl-4">
                        <li><strong>Workforce Solutions Growth:</strong> The EWS segment has a long runway for growth, both by adding more records to "The Work Number" and by expanding into new use cases and verticals.</li>
                        <li><strong>New Product Innovation:</strong> The Equifax Cloud enables the company to create new, high-value products by combining its different data assets (e.g., credit and employment data).</li>
                        <li><strong>Margin Expansion:</strong> As the company scales its cloud platform and grows its high-margin EWS business, there is significant potential for operating margin expansion.</li>
                        <li><strong>Resilient Business Model:</strong> The diversification away from the mortgage market and into more recession-resilient sectors like government services provides greater stability to the business.</li>
                    </ul>
                </div>
                <div>
                    <h3 class="subsection-title !mt-0 text-orange-600">Risks & Challenges 📉</h3>
                    <ul class="list-disc list-inside content-text space-y-2 pl-4">
                        <li><strong>Data Security & Reputational Risk:</strong> As a custodian of sensitive consumer data, Equifax is a constant target for cyberattacks. Another major data breach would be catastrophic for its reputation and business.</li>
                        <li><strong>Regulatory Scrutiny:</strong> The credit reporting industry is highly regulated. Changes in regulations, particularly around data privacy and the use of credit information, could impact the business.</li>
                        <li><strong>Mortgage Market Cyclicality:</strong> While the company is diversifying, its USIS segment remains sensitive to the cyclical nature of the U.S. mortgage market.</li>
                        <li><strong>Competition:</strong> The data and analytics space is highly competitive. Equifax must continue to innovate to maintain its data differentiation and competitive edge.</li>
                    </ul>
                </div>
            </div>
        </section>

        <footer class="bg-stone-800 text-stone-300 py-8 text-center mt-12">
            <p class="text-sm">&copy; <span id="currentYearFooter"></span> TickerHack Deep Research. For informational purposes only.</p>
            <p class="text-xs mt-1">Data synthesized from Equifax Inc. public filings (SEC 10-K & 10-Q reports) and credible financial data providers as of June 2025.</p>
        </footer>

    <script>
        document.getElementById('currentYearFooter').textContent = new Date().getFullYear();

        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-button');
        const mobileMenuEl = document.getElementById('mobile-menu');
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenuEl.classList.toggle('hidden');
            mobileMenuBtn.querySelectorAll('svg').forEach(svg => svg.classList.toggle('hidden'));
        });
        
        // Smooth scroll and active nav link highlighting
        const navLinks = document.querySelectorAll('header nav a[href^="#"]');
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                if (mobileMenuEl && !mobileMenuEl.classList.contains('hidden')) {
                    mobileMenuBtn.click(); // Close mobile menu if open
                }
                navLinks.forEach(l => l.classList.remove('active'));
                e.currentTarget.classList.add('active');
            });
        });
        
        // Segment Tabs
        const segmentTabs = document.querySelectorAll('.segment-tab-button');
        const segmentContents = document.querySelectorAll('.segment-content');
        segmentTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                segmentTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                const targetId = tab.dataset.target + 'Content';
                segmentContents.forEach(content => {
                    content.id === targetId ? content.classList.remove('hidden') : content.classList.add('hidden');
                });
            });
        });

        // Chart.js Global Config
        Chart.defaults.font.family = 'Inter, sans-serif';
        Chart.defaults.color = '#4B5563';

        const CHART_COLORS = {
            violet: '#A78BFA',
            sky: '#7DD3FC',
            orange: '#FDBA74',
            stone: '#E7E5E4',
            gray: '#4B5563',
            darkViolet: '#8B5CF6',
            darkSky: '#38BDF8',
            teal: '#5EEAD4'
        };

        // Revenue Breakdown Chart
        const revenueBreakdownCtx = document.getElementById('revenueBreakdownChart').getContext('2d');
        new Chart(revenueBreakdownCtx, {
            type: 'doughnut',
            data: {
                labels: ['Workforce Solutions', 'U.S. Information Solutions', 'International'],
                datasets: [{
                    data: [43, 33, 24], // 2024 percentages
                    backgroundColor: [CHART_COLORS.violet, CHART_COLORS.sky, CHART_COLORS.teal],
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { position: 'bottom' }, title: { display: true, text: 'Revenue by Segment (FY 2024)' } }
            }
        });
        
        // International Revenue Chart
        const internationalRevenueCtx = document.getElementById('internationalRevenueChart').getContext('2d');
        new Chart(internationalRevenueCtx, {
            type: 'pie',
            data: {
                labels: ['Latin America', 'Europe', 'Canada', 'Asia Pacific'],
                datasets: [{
                    label: 'International Revenue Mix',
                    data: [29, 27, 19, 25], // Q1 2025 percentages
                    backgroundColor: [CHART_COLORS.sky, CHART_COLORS.teal, CHART_COLORS.violet, CHART_COLORS.orange],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { position: 'bottom' }, title: { display: true, text: 'International Revenue Breakdown (Q1 2025)' } }
            }
        });

        // --- FINANCIAL CHARTS LOGIC ---

        // Yearly Data Store (Fiscal Years end Dec 31)
        const yearlyDataStore = {
            labels: ['FY20', 'FY21', 'FY22', 'FY23', 'FY24'],
            totalRevenue: { data: [4.13, 4.92, 5.12, 5.27, 5.72], label: 'Total Revenue ($B)', color: CHART_COLORS.violet },
            netIncome: { data: [536, 955, 755, 663, 608], label: 'Net Income ($M)', color: CHART_COLORS.sky },
            freeCashFlow: { data: [1150, 1400, 720, 516, 813], label: 'Free Cash Flow ($M)', color: CHART_COLORS.teal }
        };

        // Quarterly Data Store
        const quarterlyDataStore = {
            labels: ['Q2 23', 'Q3 23', 'Q4 23', 'Q1 24', 'Q2 24', 'Q3 24', 'Q4 24', 'Q1 25'],
            totalRevenue: { data: [1.32, 1.32, 1.33, 1.35, 1.38, 1.44, 1.46, 1.44], label: 'Total Revenue ($B)', color: CHART_COLORS.violet },
            adjEps: { data: [1.74, 1.76, 1.81, 1.80, 1.70, 1.85, 1.90, 1.53], label: 'Adjusted EPS ($)', color: CHART_COLORS.orange }
        };

        let yearlyChart = null;
        let quarterlyChart = null;
        const yearlySelect = document.getElementById('yearlyMetricSelect');
        const quarterlySelect = document.getElementById('quarterlyMetricSelect');
        const yearlyCanvas = document.getElementById('yearlyFinancialChart').getContext('2d');
        const quarterlyCanvas = document.getElementById('quarterlyFinancialChart').getContext('2d');

        function createChart(canvas, existingChart, dataStore, metricKey) {
            if (existingChart) {
                existingChart.destroy();
            }
            const metricDetails = dataStore[metricKey];
            const isLineChart = metricKey === 'freeCashFlow' || metricKey === 'adjEps' || metricKey === 'netIncome';

            return new Chart(canvas, {
                type: 'bar',
                data: {
                    labels: dataStore.labels,
                    datasets: [{
                        label: metricDetails.label,
                        data: metricDetails.data,
                        backgroundColor: isLineChart ? 'transparent' : metricDetails.color + 'BF',
                        borderColor: metricDetails.color,
                        borderWidth: 2,
                        type: isLineChart ? 'line' : 'bar',
                        fill: !isLineChart,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { 
                        y: { 
                            beginAtZero: false, 
                            title: { display: true, text: metricDetails.label.split('(')[1].replace(')','') }
                        } 
                    },
                    plugins: { legend: { display: false } }
                }
            });
        }
        
        yearlySelect.addEventListener('change', (event) => {
            yearlyChart = createChart(yearlyCanvas, yearlyChart, yearlyDataStore, event.target.value);
        });

        quarterlySelect.addEventListener('change', (event) => {
            quarterlyChart = createChart(quarterlyCanvas, quarterlyChart, quarterlyDataStore, event.target.value);
        });

        // Initial chart renders
        yearlyChart = createChart(yearlyCanvas, yearlyChart, yearlyDataStore, 'totalRevenue');
        quarterlyChart = createChart(quarterlyCanvas, quarterlyChart, quarterlyDataStore, 'totalRevenue');

    </script>
</body>
</html>

