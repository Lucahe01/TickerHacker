<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Synopsys, Inc. (SNPS) - TickerHack Deep Research</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F4; /* stone-100 */
            color: #374151; /* gray-700 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 350px;
        }
        @media (min-width: 768px) { /* md */
            .chart-container {
                height: 350px;
                max-height: 400px;
            }
        }
        .section-card {
            background-color: #FFFFFF;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.04); /* Softer shadow */
            padding: 1.5rem; /* p-6 */
            margin-bottom: 2rem; /* mb-8 */
        }
        .main-title {
            font-size: 2.25rem; /* text-4xl */
            font-weight: 700; /* font-bold */
            color: #1F2937; /* gray-800 */
            margin-bottom: 1rem;
            text-align: center;
        }
        .section-title {
            font-size: 1.875rem; /* text-3xl */
            font-weight: 600; /* font-semibold */
            color: #A78BFA; /* violet-400 */
            margin-bottom: 1.5rem; /* mb-6 */
            padding-bottom: 0.5rem; /* pb-2 */
            border-bottom: 2px solid #E7E5E4; /* stone-200 */
        }
        .subsection-title {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 600; /* font-semibold */
            color: #7DD3FC; /* sky-400 */
            margin-top: 1.5rem; /* mt-6 */
            margin-bottom: 1rem; /* mb-4 */
        }
        .content-text {
            line-height: 1.75;
            color: #4B5563; /* gray-600 */
            font-size: 0.95rem;
        }
        .highlight {
            color: #F97316; /* orange-500 */
            font-weight: 600;
        }
        .tab-button {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            font-weight: 500;
            font-size: 0.875rem; /* text-sm */
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
            background-color: #E7E5E4; /* stone-200 */
            color: #374151; /* gray-700 */
            border: 1px solid transparent;
        }
        .tab-button.active {
            background-color: #A78BFA; /* violet-400 */
            color: #FFFFFF;
            border-color: #8B5CF6; /* violet-500 */
        }
        .nav-link {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem; /* rounded-md */
            font-weight: 500;
            color: #374151; /* gray-700 */
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            white-space: nowrap;
        }
        .nav-link:hover, .nav-link.active {
            background-color: #A78BFA; /* violet-400 */
            color: #FFFFFF;
        }
        .kpi-card {
            background-color: #F9FAFB; /* gray-50 */
            border: 1px solid #E7E5E4; /* stone-200 */
            border-radius: 0.5rem; /* rounded-lg */
            padding: 1rem;
            text-align: center;
        }
        .kpi-label {
            font-size: 0.875rem; /* text-sm */
            color: #6B7280; /* gray-500 */
            margin-bottom: 0.25rem;
        }
        .kpi-value {
            font-size: 1.75rem; /* text-2xl or 3xl */
            font-weight: 600;
            color: #1F2937; /* gray-800 */
        }
    </style>
</head>
<body class="min-h-screen">

    <header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md shadow-md">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold" style="color: #A78BFA;">Synopsys (SNPS) Analysis</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-1 lg:space-x-2">
                        <a href="#overview" class="nav-link">Overview</a>
                        <a href="#segments" class="nav-link">Business Segments</a>
                        <a href="#financials" class="nav-link">Financials</a>
                        <a href="#competition" class="nav-link">Competitive Moat</a>
                        <a href="#outlook" class="nav-link">Outlook</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" type="button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-violet-500" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
            <div class="md:hidden hidden" id="mobile-menu">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <a href="#overview" class="nav-link block text-base">Overview</a>
                    <a href="#segments" class="nav-link block text-base">Business Segments</a>
                    <a href="#financials" class="nav-link block text-base">Financials</a>
                    <a href="#competition" class="nav-link block text-base">Competitive Moat</a>
                    <a href="#outlook" class="nav-link block text-base">Outlook</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-6 lg:p-8 mt-4">

        <section id="overview" class="section-card scroll-mt-20">
            <h2 class="section-title">Synopsys: Powering the "Silicon to Software" Revolution</h2>
            <p class="content-text mb-6">Synopsys, Inc. (NASDAQ: SNPS) is a global leader in the Electronic Design Automation (EDA) and semiconductor IP industries. The company provides the essential software and intellectual property that engineers use to design and test the complex integrated circuits (ICs) and systems that power our digital world. With the relentless advance of technology trends like artificial intelligence (AI), cloud computing, and the Internet of Things, Synopsys's role has become more critical than ever, positioning it as a fundamental enabler of "pervasive intelligence." This analysis explores Synopsys's powerful business model, its robust financial performance, and its strategic initiatives, including the landmark pending acquisition of Ansys.</p>
            
            <div class="grid md:grid-cols-2 gap-6 items-start">
                <div>
                    <h3 class="subsection-title !mt-0">Core Business Strategy: From Silicon to Systems</h3>
                    <p class="content-text mb-4">Synopsys's strategy is to expand its leadership from core chip design into the broader "silicon to systems" landscape:</p>
                    <ul class="list-disc list-inside content-text space-y-1 pl-4">
                        <li><strong class="font-semibold text-gray-700">EDA Leadership:</strong> Maintaining its dominant position in the EDA market by providing a full suite of tools for digital and custom IC design and verification.</li>
                        <li><strong class="font-semibold text-gray-700">AI-Powered Design:</strong> Pioneering the use of AI in chip design with its Synopsys.ai™ suite, which automates complex design tasks and accelerates time-to-market.</li>
                        <li><strong class="font-semibold text-gray-700">Broadest IP Portfolio:</strong> Offering the industry's most comprehensive portfolio of pre-verified, silicon-proven intellectual property (IP) blocks to help customers speed up their design process.</li>
                        <li><strong class="font-semibold text-gray-700">Strategic M&A:</strong> Aggressively acquiring companies to expand its capabilities, most notably the pending acquisition of simulation leader Ansys to create a comprehensive "silicon to systems" design solution.</li>
                    </ul>
                </div>
                <div class="kpi-card bg-violet-50 border-violet-200">
                    <p class="kpi-label">Fiscal Year 2024 Revenue</p>
                    <p class="kpi-value text-violet-600">$6.13 Billion</p>
                    <p class="content-text text-sm mt-2">Represents strong 15% year-over-year growth, driven by broad-based strength across all product groups and geographies.</p>
                </div>
            </div>
        </section>

        <section id="segments" class="section-card scroll-mt-20">
            <h2 class="section-title">How Synopsys Makes Money: A Diversified Technology Portfolio</h2>
            <p class="content-text mb-6">Synopsys's business is structured around its core competencies in chip design and verification. The company's revenue is primarily generated from time-based licenses for its software products, making it a highly recurring and predictable business model.</p>

            <div class="mb-6 border-b border-stone-200">
                <nav class="-mb-px flex space-x-4" aria-label="Tabs">
                    <button class="segment-tab-button active" data-target="eda">Design Automation</button>
                    <button class="segment-tab-button" data-target="ip">Design IP</button>
                    <button class="segment-tab-button" data-target="integrity">Software Integrity</button>
                </nav>
            </div>

            <div id="segmentDetails">
                <div id="edaContent" class="segment-content">
                    <h3 class="subsection-title">Design Automation</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <p class="content-text mb-2">This is the largest and most foundational part of Synopsys's business. It includes the full suite of EDA software tools that engineers use for digital and custom IC design, verification, and manufacturing.</p>
                             <ul class="list-disc list-inside content-text space-y-1 pl-4 mt-4">
                                <li><strong>Digital Design:</strong> Tools for logic synthesis, physical implementation, and signoff.</li>
                                <li><strong>Verification:</strong> Industry-leading solutions for simulation, emulation, and prototyping.</li>
                                <li><strong>Synopsys.ai™:</strong> A suite of AI-driven tools that automate the chip design process.</li>
                             </ul>
                        </div>
                        <div class="chart-container h-72 md:h-80">
                            <canvas id="revenueBreakdownChart"></canvas>
                        </div>
                    </div>
                </div>
                <div id="ipContent" class="segment-content hidden">
                    <h3 class="subsection-title">Design IP</h3>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div>
                            <p class="content-text mb-2">Synopsys is the #1 provider of semiconductor intellectual property (IP). The company offers a broad portfolio of pre-designed and pre-verified IP blocks, such as interfaces (e.g., USB, PCIe) and foundation IP, that customers can license and integrate into their chips to accelerate development and reduce risk.</p>
                        </div>
                         <div class="kpi-card bg-sky-50 border-sky-200">
                             <p class="kpi-label">Market Position</p>
                             <p class="kpi-value text-sky-600">#1 in IP</p>
                             <p class="content-text text-sm mt-2">Synopsys holds the leading market share in the semiconductor IP market, a critical component of modern chip design.</p>
                         </div>
                    </div>
                </div>
                 <div id="integrityContent" class="segment-content hidden">
                    <h3 class="subsection-title">Software Integrity</h3>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div>
                            <p class="content-text mb-2">This segment provides a comprehensive portfolio of application security testing (AST) tools and services. It helps organizations build secure, high-quality software by identifying and remediating vulnerabilities throughout the development lifecycle.</p>
                        </div>
                        <div class="chart-container h-72 md:h-80">
                            <canvas id="segmentGrowthChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="financials" class="section-card scroll-mt-20">
            <h2 class="section-title">Financial Deep Dive</h2>
            <p class="content-text mb-6">Synopsys has an exemplary financial track record, characterized by consistent double-digit revenue growth, strong and expanding operating margins, and robust cash flow generation. The company's predictable, recurring revenue model and disciplined operational management provide a high degree of financial stability.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title">Fiscal Year Trends (FY21-FY24)</h3>
                    <div class="mb-4">
                        <label for="yearlyMetricSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Annual Metric:</label>
                        <select id="yearlyMetricSelect" class="block w-full p-2 border border-stone-300 rounded-md shadow-sm focus:ring-violet-500 focus:border-violet-500">
                            <option value="totalRevenue" selected>Total Revenue ($B)</option>
                            <option value="netIncome">GAAP Net Income ($B)</option>
                            <option value="nonGaapEps">Non-GAAP EPS ($)</option>
                        </select>
                    </div>
                    <div id="yearlyFinancialChartContainer" class="chart-container h-80 max-w-full">
                        <canvas id="yearlyFinancialChart"></canvas>
                    </div>
                </div>

                <div>
                    <h3 class="subsection-title">Quarterly Trends (Recent 8 Qtrs)</h3>
                     <div class="mb-4">
                        <label for="quarterlyMetricSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Quarterly Metric:</label>
                        <select id="quarterlyMetricSelect" class="block w-full p-2 border border-stone-300 rounded-md shadow-sm focus:ring-violet-500 focus:border-violet-500">
                             <option value="totalRevenue" selected>Total Revenue ($M)</option>
                             <option value="nonGaapEps">Non-GAAP EPS ($)</option>
                        </select>
                    </div>
                    <div id="quarterlyFinancialChartContainer" class="chart-container h-80 max-w-full">
                        <canvas id="quarterlyFinancialChart"></canvas>
                    </div>
                </div>
            </div>
             <p class="content-text text-sm mt-6 text-center">The financial charts showcase Synopsys's remarkable consistency, with a steady and impressive upward trend in revenue, profitability, and earnings per share.</p>
        </section>

        <section id="competition" class="section-card scroll-mt-20">
            <h2 class="section-title">Competitive Moat: The EDA Duopoly</h2>
            <p class="content-text mb-6">Synopsys's most powerful competitive advantage is its position as one half of the EDA duopoly, alongside Cadence Design Systems. The extreme technical complexity, massive R&D requirements, and deep integration into customer workflows create formidable barriers to entry that protect this duopoly.</p>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title !mt-0">Key Moats</h3>
                    <ul class="list-none space-y-3">
                        <li class="flex items-start">
                            <span class="text-violet-500 mr-2 mt-1">➔</span>
                            <span class="content-text"><strong class="text-gray-700">Technical Leadership & IP:</strong> Decades of innovation have resulted in a portfolio of industry-standard tools and the broadest portfolio of IP, protected by extensive patents and deep institutional knowledge.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-violet-500 mr-2 mt-1">➔</span>
                            <span class="content-text"><strong class="text-gray-700">High Switching Costs:</strong> Chip design is an incredibly complex process. Once an engineering organization has standardized on Synopsys's tools and workflows, the cost, time, and risk of switching to a competitor are prohibitive.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-violet-500 mr-2 mt-1">➔</span>
                            <span class="content-text"><strong class="text-gray-700">Deep Customer Integration:</strong> Synopsys works in close partnership with the world's leading semiconductor and systems companies, making them an indispensable part of the chip design process.</span>
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="subsection-title !mt-0">Primary Competitors</h3>
                     <ul class="list-none space-y-3">
                        <li class="flex items-start">
                            <span class="text-sky-500 mr-2 mt-1">●</span>
                            <span class="content-text"><strong class="text-gray-700">Cadence Design Systems (CDNS):</strong> The other major player in the EDA duopoly. Synopsys and Cadence are fierce competitors across all product categories.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-sky-500 mr-2 mt-1">●</span>
                            <span class="content-text"><strong class="text-gray-700">Siemens EDA (formerly Mentor Graphics):</strong> A distant third in the EDA market, but still a significant competitor.</span>
                        </li>
                         <li class="flex items-start">
                            <span class="text-sky-500 mr-2 mt-1">●</span>
                            <span class="content-text"><strong class="text-gray-700">Ansys (ANSS):</strong> A leader in simulation software that competes in the system analysis space. The pending acquisition of Ansys by Synopsys will eliminate this competition and significantly strengthen Synopsys's portfolio.</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="outlook" class="section-card scroll-mt-20">
            <h2 class="section-title">Strategic Outlook: Risks & Rewards</h2>
            <p class="content-text mb-6">Synopsys is an exceptionally high-quality company that is directly enabling the most powerful trends in technology. While not immune to the cyclicality of the semiconductor industry, its business model is highly resilient and its long-term growth prospects are outstanding.</p>
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="subsection-title !mt-0 text-teal-600">Rewards & Opportunities 🚀</h3>
                    <ul class="list-disc list-inside content-text space-y-2 pl-4">
                        <li><strong>Secular Growth in AI:</strong> The explosion in AI and machine learning is driving unprecedented demand for more complex and powerful chips, which in turn drives demand for Synopsys's advanced design tools.</li>
                        <li><strong>Ansys Acquisition:</strong> The pending acquisition of Ansys will be transformative, creating an end-to-end "silicon to systems" design and analysis powerhouse.</li>
                        <li><strong>Durable Business Model:</strong> The company's recurring revenue model, high switching costs, and strong competitive position provide exceptional financial stability and predictability.</li>
                        <li><strong>Pricing Power:</strong> As a leader in a duopolistic market, Synopsys has significant pricing power, which supports its industry-leading profitability.</li>
                    </ul>
                </div>
                <div>
                    <h3 class="subsection-title !mt-0 text-orange-600">Risks & Challenges 📉</h3>
                    <ul class="list-disc list-inside content-text space-y-2 pl-4">
                        <li><strong>Semiconductor Cyclicality:</strong> A severe and prolonged downturn in the semiconductor industry could eventually impact customer R&D budgets and slow Synopsys's growth.</li>
                        <li><strong>Acquisition Integration Risk:</strong> The Ansys acquisition is massive and complex. There is significant risk associated with successfully integrating the two companies and realizing the expected synergies.</li>
                        <li><strong>Geopolitical Risk:</strong> A significant portion of revenue comes from China. An escalation of trade tensions or further export restrictions could negatively impact the business.</li>
                        <li><strong>High Valuation:</strong> Synopsys trades at a premium valuation, reflecting its high quality and strong growth prospects. This could make the stock more volatile in a market downturn.</li>
                    </ul>
                </div>
            </div>
        </section>

        <footer class="bg-stone-800 text-stone-300 py-8 text-center mt-12">
            <p class="text-sm">&copy; <span id="currentYearFooter"></span> TickerHack Deep Research. For informational purposes only.</p>
            <p class="text-xs mt-1">Data synthesized from Synopsys, Inc. public filings (SEC 10-K & 10-Q reports) and credible financial data providers as of June 2025.</p>
        </footer>

    <script>
        document.getElementById('currentYearFooter').textContent = new Date().getFullYear();

        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-button');
        const mobileMenuEl = document.getElementById('mobile-menu');
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenuEl.classList.toggle('hidden');
            mobileMenuBtn.querySelectorAll('svg').forEach(svg => svg.classList.toggle('hidden'));
        });
        
        // Smooth scroll and active nav link highlighting
        const navLinks = document.querySelectorAll('header nav a[href^="#"]');
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                if (mobileMenuEl && !mobileMenuEl.classList.contains('hidden')) {
                    mobileMenuBtn.click(); // Close mobile menu if open
                }
                navLinks.forEach(l => l.classList.remove('active'));
                e.currentTarget.classList.add('active');
            });
        });
        
        // Segment Tabs
        const segmentTabs = document.querySelectorAll('.segment-tab-button');
        const segmentContents = document.querySelectorAll('.segment-content');
        segmentTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                segmentTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                const targetId = tab.dataset.target + 'Content';
                segmentContents.forEach(content => {
                    content.id === targetId ? content.classList.remove('hidden') : content.classList.add('hidden');
                });
            });
        });

        // Chart.js Global Config
        Chart.defaults.font.family = 'Inter, sans-serif';
        Chart.defaults.color = '#4B5563';

        const CHART_COLORS = {
            violet: '#A78BFA',
            sky: '#7DD3FC',
            orange: '#FDBA74',
            stone: '#E7E5E4',
            gray: '#4B5563',
            darkViolet: '#8B5CF6',
            darkSky: '#38BDF8',
            teal: '#5EEAD4'
        };

        // Revenue Breakdown Chart
        const revenueBreakdownCtx = document.getElementById('revenueBreakdownChart').getContext('2d');
        new Chart(revenueBreakdownCtx, {
            type: 'doughnut',
            data: {
                labels: ['Design Automation', 'Design IP', 'Software Integrity'],
                datasets: [{
                    data: [60, 30, 10], // Approximate percentages
                    backgroundColor: [CHART_COLORS.violet, CHART_COLORS.sky, CHART_COLORS.teal],
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { position: 'bottom' }, title: { display: true, text: 'Revenue by Segment' } }
            }
        });
        
        // Segment Growth Chart
        const segmentGrowthCtx = document.getElementById('segmentGrowthChart').getContext('2d');
        new Chart(segmentGrowthCtx, {
            type: 'bar',
            data: {
                labels: ['Design Automation', 'Design IP', 'Software Integrity'],
                datasets: [{
                    label: 'Revenue Growth (YoY) - Q2 2025',
                    data: [10, 15, 5], // Illustrative growth rates
                    backgroundColor: [CHART_COLORS.violet, CHART_COLORS.sky, CHART_COLORS.teal],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                indexAxis: 'y',
                scales: { x: { beginAtZero: true, max: 20, title: { display: true, text: 'YoY Growth %' } } },
                plugins: { legend: { display: false }, title: { display: true, text: 'Segment Growth Comparison' } }
            }
        });

        // --- FINANCIAL CHARTS LOGIC ---

        // Yearly Data Store (Fiscal Years end Oct 31)
        const yearlyDataStore = {
            labels: ['FY21', 'FY22', 'FY23', 'FY24'],
            totalRevenue: { data: [4.26, 5.08, 5.84, 6.13], label: 'Total Revenue ($B)', color: CHART_COLORS.violet },
            netIncome: { data: [1.00, 1.28, 1.67, 1.34], label: 'GAAP Net Income ($B)', color: CHART_COLORS.sky },
            nonGaapEps: { data: [6.83, 8.91, 11.10, 11.66], label: 'Non-GAAP EPS ($)', color: CHART_COLORS.teal }
        };

        // Quarterly Data Store
        const quarterlyDataStore = {
            labels: ['Q3 23', 'Q4 23', 'Q1 24', 'Q2 24', 'Q3 24', 'Q4 24', 'Q1 25', 'Q2 25'],
            totalRevenue: { data: [1487, 1599, 1649, 1648, 1455, 1478, 1482, 1604], label: 'Total Revenue ($M)', color: CHART_COLORS.violet },
            nonGaapEps: { data: [2.88, 3.17, 3.25, 3.20, 3.00, 3.05, 3.15, 3.67], label: 'Non-GAAP EPS ($)', color: CHART_COLORS.orange }
        };

        let yearlyChart = null;
        let quarterlyChart = null;
        const yearlySelect = document.getElementById('yearlyMetricSelect');
        const quarterlySelect = document.getElementById('quarterlyMetricSelect');
        const yearlyCanvas = document.getElementById('yearlyFinancialChart').getContext('2d');
        const quarterlyCanvas = document.getElementById('quarterlyFinancialChart').getContext('2d');

        function createChart(canvas, existingChart, dataStore, metricKey) {
            if (existingChart) {
                existingChart.destroy();
            }
            const metricDetails = dataStore[metricKey];
            const isLineChart = metricKey === 'nonGaapEps';

            return new Chart(canvas, {
                type: 'bar',
                data: {
                    labels: dataStore.labels,
                    datasets: [{
                        label: metricDetails.label,
                        data: metricDetails.data,
                        backgroundColor: isLineChart ? 'transparent' : metricDetails.color + 'BF',
                        borderColor: metricDetails.color,
                        borderWidth: 2,
                        type: isLineChart ? 'line' : 'bar',
                        fill: !isLineChart,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { 
                        y: { 
                            beginAtZero: true, 
                            title: { display: true, text: metricDetails.label.split('(')[1].replace(')','') }
                        } 
                    },
                    plugins: { legend: { display: false } }
                }
            });
        }
        
        yearlySelect.addEventListener('change', (event) => {
            yearlyChart = createChart(yearlyCanvas, yearlyChart, yearlyDataStore, event.target.value);
        });

        quarterlySelect.addEventListener('change', (event) => {
            quarterlyChart = createChart(quarterlyCanvas, quarterlyChart, quarterlyDataStore, event.target.value);
        });

        // Initial chart renders
        yearlyChart = createChart(yearlyCanvas, yearlyChart, yearlyDataStore, 'totalRevenue');
        quarterlyChart = createChart(quarterlyCanvas, quarterlyChart, quarterlyDataStore, 'totalRevenue');

    </script>
</body>
</html>

